<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenNI 2.0: OpenNI.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="OpenNILogo.bmp"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenNI 2.0
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">OpenNI.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_open_n_i_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">*                                                                            *</span>
<a name="l00003"></a>00003 <span class="comment">*  OpenNI 2.x Alpha                                                          *</span>
<a name="l00004"></a>00004 <span class="comment">*  Copyright (C) 2012 PrimeSense Ltd.                                        *</span>
<a name="l00005"></a>00005 <span class="comment">*                                                                            *</span>
<a name="l00006"></a>00006 <span class="comment">*  This file is part of OpenNI.                                              *</span>
<a name="l00007"></a>00007 <span class="comment">*                                                                            *</span>
<a name="l00008"></a>00008 <span class="comment">*  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);           *</span>
<a name="l00009"></a>00009 <span class="comment">*  you may not use this file except in compliance with the License.          *</span>
<a name="l00010"></a>00010 <span class="comment">*  You may obtain a copy of the License at                                   *</span>
<a name="l00011"></a>00011 <span class="comment">*                                                                            *</span>
<a name="l00012"></a>00012 <span class="comment">*      http://www.apache.org/licenses/LICENSE-2.0                            *</span>
<a name="l00013"></a>00013 <span class="comment">*                                                                            *</span>
<a name="l00014"></a>00014 <span class="comment">*  Unless required by applicable law or agreed to in writing, software       *</span>
<a name="l00015"></a>00015 <span class="comment">*  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,         *</span>
<a name="l00016"></a>00016 <span class="comment">*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  *</span>
<a name="l00017"></a>00017 <span class="comment">*  See the License for the specific language governing permissions and       *</span>
<a name="l00018"></a>00018 <span class="comment">*  limitations under the License.                                            *</span>
<a name="l00019"></a>00019 <span class="comment">*                                                                            *</span>
<a name="l00020"></a>00020 <span class="comment">*****************************************************************************/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef _OPENNI_H_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define _OPENNI_H_</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;OniPlatform.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;OniProperties.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_oni_enums_8h.html">OniEnums.h</a>&quot;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;OniCAPI.h&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;OniCProperties.h&quot;</span>
<a name="l00030"></a>00030 
<a name="l00034"></a><a class="code" href="namespaceopenni.html">00034</a> <span class="keyword">namespace </span>openni
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036 
<a name="l00038"></a><a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">00038</a> <span class="keyword">typedef</span> uint16_t                <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>;
<a name="l00040"></a><a class="code" href="namespaceopenni.html#a15bcac1ff77c313557dd28804c31c4ff">00040</a> <span class="keyword">typedef</span> uint16_t                <a class="code" href="namespaceopenni.html#a15bcac1ff77c313557dd28804c31c4ff">Grayscale16Pixel</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">// structs</span>
<a name="l00043"></a><a class="code" href="structopenni_1_1_version.html#aecc77ce1b6aa5866c7d5013d37fb1a5a">00043</a> _ONI_DECLARE_VERSION(<a class="code" href="structopenni_1_1_version.html">Version</a>);
<a name="l00044"></a><a class="code" href="structopenni_1_1_r_g_b888_pixel.html#a386473055de76efb74b8fb820d39e9a1">00044</a> _ONI_DECLARE_RGB888_PIXEL(<a class="code" href="structopenni_1_1_r_g_b888_pixel.html">RGB888Pixel</a>);
<a name="l00045"></a><a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html#a877023a8447a329874a75cad01e38aed">00045</a> _ONI_DECLARE_YUV422_PIXEL(<a class="code" href="structopenni_1_1_y_u_v422_double_pixel.html">YUV422DoublePixel</a>);
<a name="l00046"></a>00046 
<a name="l00048"></a>00048 <span class="preprocessor">#if ONI_PLATFORM != ONI_PLATFORM_WIN32</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wunused-variable&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic push</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00052"></a><a class="code" href="namespaceopenni.html#ad917a99196968a7d3ce9e8ca0b222953">00052</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespaceopenni.html#ad917a99196968a7d3ce9e8ca0b222953">ANY_DEVICE</a> = NULL;
<a name="l00053"></a>00053 <span class="preprocessor">#if ONI_PLATFORM != ONI_PLATFORM_WIN32</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC diagnostic pop</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00061"></a>00061 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00062"></a><a class="code" href="classopenni_1_1_array.html">00062</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_array.html">Array</a>
<a name="l00063"></a>00063 {
<a name="l00064"></a>00064 <span class="keyword">public</span>:
<a name="l00068"></a><a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">00068</a>     <a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">Array</a>() : m_data(NULL), m_count(0), m_owner(false) {}
<a name="l00069"></a>00069 
<a name="l00077"></a><a class="code" href="classopenni_1_1_array.html#a4db39602aa6df3e6fa41d8d364a28f65">00077</a>     <a class="code" href="classopenni_1_1_array.html#a4db39602aa6df3e6fa41d8d364a28f65">Array</a>(<span class="keyword">const</span> T* data, <span class="keywordtype">int</span> count) : m_owner(false) { _setData(data, count); }
<a name="l00078"></a>00078 
<a name="l00082"></a><a class="code" href="classopenni_1_1_array.html#ac318cd0a03d863ea861791bb3f647253">00082</a>     <a class="code" href="classopenni_1_1_array.html#ac318cd0a03d863ea861791bb3f647253">~Array</a>()
<a name="l00083"></a>00083     {
<a name="l00084"></a>00084         clear();
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086 
<a name="l00091"></a><a class="code" href="classopenni_1_1_array.html#a92cfa92a6569dbc4f9421f3aa13abe25">00091</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_array.html#a92cfa92a6569dbc4f9421f3aa13abe25">getSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_count; }
<a name="l00092"></a>00092 
<a name="l00096"></a><a class="code" href="classopenni_1_1_array.html#ad99996179b72b67eab31628dd21592e1">00096</a>     <span class="keyword">const</span> T&amp; <a class="code" href="classopenni_1_1_array.html#ad99996179b72b67eab31628dd21592e1">operator[]</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_data[index];}
<a name="l00097"></a>00097 
<a name="l00108"></a>00108     <span class="keywordtype">void</span> _setData(<span class="keyword">const</span> T* data, <span class="keywordtype">int</span> count, <span class="keywordtype">bool</span> isOwner = <span class="keyword">false</span>)
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110         clear();
<a name="l00111"></a>00111         m_count = count;
<a name="l00112"></a>00112         m_owner = isOwner;
<a name="l00113"></a>00113         <span class="keywordflow">if</span> (!isOwner)
<a name="l00114"></a>00114         {
<a name="l00115"></a>00115             m_data = data;
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117         <span class="keywordflow">else</span>
<a name="l00118"></a>00118         {
<a name="l00119"></a>00119             m_data = <span class="keyword">new</span> T[count];
<a name="l00120"></a>00120             memcpy((<span class="keywordtype">void</span>*)m_data, data, count*<span class="keyword">sizeof</span>(T));
<a name="l00121"></a>00121         }
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="keyword">private</span>:
<a name="l00125"></a>00125     <a class="code" href="classopenni_1_1_array.html#a19215ebd71c8da5c64bf9114eb1c9c46">Array</a>(<span class="keyword">const</span> Array&lt;T&gt;&amp;);
<a name="l00126"></a>00126     Array&lt;T&gt;&amp; operator=(<span class="keyword">const</span> Array&lt;T&gt;&amp;);
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordtype">void</span> clear()
<a name="l00129"></a>00129     {
<a name="l00130"></a>00130         <span class="keywordflow">if</span> (m_owner &amp;&amp; m_data != NULL)
<a name="l00131"></a>00131             <span class="keyword">delete</span> []m_data;
<a name="l00132"></a>00132         m_owner = <span class="keyword">false</span>;
<a name="l00133"></a>00133         m_data = NULL;
<a name="l00134"></a>00134         m_count = 0;
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="keyword">const</span> T* m_data;
<a name="l00138"></a>00138     <span class="keywordtype">int</span> m_count;
<a name="l00139"></a>00139     <span class="keywordtype">bool</span> m_owner;
<a name="l00140"></a>00140 };
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">// Forward declaration of all</span>
<a name="l00143"></a>00143 <span class="keyword">class </span>SensorInfo;
<a name="l00144"></a>00144 <span class="keyword">class </span>VideoStream;
<a name="l00145"></a>00145 <span class="keyword">class </span>VideoFrameRef;
<a name="l00146"></a>00146 <span class="keyword">class </span>Device;
<a name="l00147"></a>00147 <span class="keyword">class </span>OpenNI;
<a name="l00148"></a>00148 <span class="keyword">class </span>CameraSettings;
<a name="l00149"></a>00149 <span class="keyword">class </span>PlaybackControl;
<a name="l00150"></a>00150 
<a name="l00165"></a><a class="code" href="classopenni_1_1_video_mode.html">00165</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> : <span class="keyword">private</span> OniVideoMode
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167 <span class="keyword">public</span>:
<a name="l00173"></a><a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">00173</a>     <a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">VideoMode</a>()
<a name="l00174"></a>00174     {}
<a name="l00175"></a>00175 
<a name="l00181"></a><a class="code" href="classopenni_1_1_video_mode.html#a6af750616c636565dcdf93fd137044e7">00181</a>     <a class="code" href="classopenni_1_1_video_mode.html#a6e7db60c5d475fcd039a6619816ae8d6">VideoMode</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; other)
<a name="l00182"></a>00182     {
<a name="l00183"></a>00183         *<span class="keyword">this</span> = other;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00192"></a><a class="code" href="classopenni_1_1_video_mode.html#a7dc4cd97e74a1c99408bc2a39964c16d">00192</a>     <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; <a class="code" href="classopenni_1_1_video_mode.html#a7dc4cd97e74a1c99408bc2a39964c16d">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; other)
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194         <a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">setPixelFormat</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">getPixelFormat</a>());
<a name="l00195"></a>00195         <a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">setResolution</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">getResolutionX</a>(), other.<a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">getResolutionY</a>());
<a name="l00196"></a>00196         <a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">setFps</a>(other.<a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">getFps</a>());
<a name="l00197"></a>00197 
<a name="l00198"></a>00198         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00205"></a><a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">00205</a>     <a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a> <a class="code" href="classopenni_1_1_video_mode.html#a40aa927adf7917389f48d9f5d8a09ab9">getPixelFormat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a>)pixelFormat; }
<a name="l00206"></a>00206 
<a name="l00211"></a><a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">00211</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#aa63e6c57d49bca4694e6c35404bbaf6c">getResolutionX</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> resolutionX; }
<a name="l00212"></a>00212 
<a name="l00217"></a><a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">00217</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#af7eb3ed0e7e5e11c44c97abad705244d">getResolutionY</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> resolutionY;}
<a name="l00218"></a>00218 
<a name="l00223"></a><a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">00223</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_mode.html#a5d91e052575cadda03479815982e92e0">getFps</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fps; }
<a name="l00224"></a>00224 
<a name="l00231"></a><a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">00231</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea">setPixelFormat</a>(<a class="code" href="namespaceopenni.html#a6d1ecf2502394d600cb8d3709092d5a5">PixelFormat</a> format) { this-&gt;pixelFormat = (OniPixelFormat)format; }
<a name="l00232"></a>00232 
<a name="l00240"></a><a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">00240</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#a01c52061617acb5f62a9eabf8b2acdbe">setResolution</a>(<span class="keywordtype">int</span> resolutionX, <span class="keywordtype">int</span> resolutionY)
<a name="l00241"></a>00241     {
<a name="l00242"></a>00242         this-&gt;resolutionX = resolutionX;
<a name="l00243"></a>00243         this-&gt;resolutionY = resolutionY;
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245 
<a name="l00252"></a><a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">00252</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_mode.html#ad77d3ea95c7df97759f7d232d738b30e">setFps</a>(<span class="keywordtype">int</span> fps) { this-&gt;fps = fps; }
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="classopenni_1_1_video_mode.html#a08ab6b96be9413b35b5898694db91bfb">00254</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>;
<a name="l00255"></a><a class="code" href="classopenni_1_1_video_mode.html#a4fd1028f691947151ea08e0db214f01c">00255</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00256"></a><a class="code" href="classopenni_1_1_video_mode.html#a19caa736db2e87abcc9d7c66bccaefb6">00256</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>;
<a name="l00257"></a>00257 };
<a name="l00258"></a>00258 
<a name="l00276"></a><a class="code" href="classopenni_1_1_sensor_info.html">00276</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278 <span class="keyword">public</span>:
<a name="l00283"></a><a class="code" href="classopenni_1_1_sensor_info.html#a13ba6152bbfbadf9c39eacdbab9ce82c">00283</a>     <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> <a class="code" href="classopenni_1_1_sensor_info.html#a13ba6152bbfbadf9c39eacdbab9ce82c">getSensorType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a>)m_pInfo-&gt;sensorType; }
<a name="l00284"></a>00284 
<a name="l00292"></a><a class="code" href="classopenni_1_1_sensor_info.html#a4dd9f8796091f2ad3853efe13929f719">00292</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_array.html">Array&lt;VideoMode&gt;</a>&amp; <a class="code" href="classopenni_1_1_sensor_info.html#a4dd9f8796091f2ad3853efe13929f719">getSupportedVideoModes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_videoModes; }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="keyword">private</span>:
<a name="l00295"></a>00295     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp;);
<a name="l00296"></a>00296     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp;);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298     <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>() : m_pInfo(NULL), m_videoModes(NULL, 0) {}
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     SensorInfo(<span class="keyword">const</span> OniSensorInfo* pInfo) : m_pInfo(NULL), m_videoModes(NULL, 0)
<a name="l00301"></a>00301     {
<a name="l00302"></a>00302         _setInternal(pInfo);
<a name="l00303"></a>00303     }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <span class="keywordtype">void</span> _setInternal(<span class="keyword">const</span> OniSensorInfo* pInfo)
<a name="l00306"></a>00306     {
<a name="l00307"></a>00307         m_pInfo = pInfo;
<a name="l00308"></a>00308         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l00309"></a>00309         {
<a name="l00310"></a>00310             m_videoModes._setData(NULL, 0);
<a name="l00311"></a>00311         }
<a name="l00312"></a>00312         <span class="keywordflow">else</span>
<a name="l00313"></a>00313         {
<a name="l00314"></a>00314             m_videoModes._setData(static_cast&lt;VideoMode*&gt;(pInfo-&gt;pSupportedVideoModes), pInfo-&gt;numSupportedVideoModes);
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316     }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318     <span class="keyword">const</span> OniSensorInfo* m_pInfo;
<a name="l00319"></a>00319     Array&lt;VideoMode&gt; m_videoModes;
<a name="l00320"></a>00320 
<a name="l00321"></a><a class="code" href="classopenni_1_1_sensor_info.html#a4fd1028f691947151ea08e0db214f01c">00321</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00322"></a><a class="code" href="classopenni_1_1_sensor_info.html#a520fa05e0bf58785da428f7a0241eee2">00322</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l00323"></a>00323 };
<a name="l00324"></a>00324 
<a name="l00334"></a><a class="code" href="classopenni_1_1_device_info.html">00334</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a> : <span class="keyword">private</span> OniDeviceInfo
<a name="l00335"></a>00335 {
<a name="l00336"></a>00336 <span class="keyword">public</span>:
<a name="l00341"></a><a class="code" href="classopenni_1_1_device_info.html#af4f01d41cff1abc9c8ac0b32425fee25">00341</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#af4f01d41cff1abc9c8ac0b32425fee25">getUri</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> uri; }
<a name="l00343"></a><a class="code" href="classopenni_1_1_device_info.html#ac0299511484c97c396e29da8e807b139">00343</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#ac0299511484c97c396e29da8e807b139">getVendor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> vendor; }
<a name="l00345"></a><a class="code" href="classopenni_1_1_device_info.html#a9e6778ffdd87c71cd87fc0c811c305bf">00345</a>     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_device_info.html#a9e6778ffdd87c71cd87fc0c811c305bf">getName</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> name; }
<a name="l00347"></a><a class="code" href="classopenni_1_1_device_info.html#aab7d4575adff3fd5e835446a78c76e37">00347</a>     uint16_t <a class="code" href="classopenni_1_1_device_info.html#aab7d4575adff3fd5e835446a78c76e37">getUsbVendorId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> usbVendorId; }
<a name="l00349"></a><a class="code" href="classopenni_1_1_device_info.html#a79580fdda1ed6e0592de2a8a49a7d947">00349</a>     uint16_t <a class="code" href="classopenni_1_1_device_info.html#a79580fdda1ed6e0592de2a8a49a7d947">getUsbProductId</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> usbProductId; }
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="classopenni_1_1_device_info.html#a520fa05e0bf58785da428f7a0241eee2">00351</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l00352"></a><a class="code" href="classopenni_1_1_device_info.html#a1d661a036b1e7e29b65f2b012bc92d00">00352</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l00353"></a>00353 };
<a name="l00354"></a>00354 
<a name="l00368"></a><a class="code" href="classopenni_1_1_video_frame_ref.html">00368</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370 <span class="keyword">public</span>:
<a name="l00375"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">00375</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">VideoFrameRef</a>()
<a name="l00376"></a>00376     {
<a name="l00377"></a>00377         m_pFrame = NULL;
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 
<a name="l00383"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1003fbe08a41586b8bf98c8e3f76fd0d">00383</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#a1003fbe08a41586b8bf98c8e3f76fd0d">~VideoFrameRef</a>()
<a name="l00384"></a>00384     {
<a name="l00385"></a>00385         <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>();
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 
<a name="l00393"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ae7f1a028c98bf9969a5e5b504e37c378">00393</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html#af67a596c25b7bbde80f5ecc42644269d">VideoFrameRef</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; other) : m_pFrame(NULL)
<a name="l00394"></a>00394     {
<a name="l00395"></a>00395         _setFrame(other.m_pFrame);
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00403"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#aa60bde0bb1fa8db6992585ca80f57932">00403</a>     <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; <a class="code" href="classopenni_1_1_video_frame_ref.html#aa60bde0bb1fa8db6992585ca80f57932">operator=</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>&amp; other)
<a name="l00404"></a>00404     {
<a name="l00405"></a>00405         _setFrame(other.m_pFrame);
<a name="l00406"></a>00406         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408 
<a name="l00414"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1414fae176ed7bb88f3b02865014ee09">00414</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a1414fae176ed7bb88f3b02865014ee09">getDataSize</a>()<span class="keyword"> const</span>
<a name="l00415"></a>00415 <span class="keyword">    </span>{
<a name="l00416"></a>00416         <span class="keywordflow">return</span> m_pFrame-&gt;dataSize;
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 
<a name="l00424"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad9301e9b6d52ffa9424cfeb881a36115">00424</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="classopenni_1_1_video_frame_ref.html#ad9301e9b6d52ffa9424cfeb881a36115">getData</a>()<span class="keyword"> const</span>
<a name="l00425"></a>00425 <span class="keyword">    </span>{
<a name="l00426"></a>00426         <span class="keywordflow">return</span> m_pFrame-&gt;data;
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428 
<a name="l00435"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a25492deb69c269488b3ec56ac50b46af">00435</a>     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> <a class="code" href="classopenni_1_1_video_frame_ref.html#a25492deb69c269488b3ec56ac50b46af">getSensorType</a>()<span class="keyword"> const</span>
<a name="l00436"></a>00436 <span class="keyword">    </span>{
<a name="l00437"></a>00437         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a>)m_pFrame-&gt;sensorType;
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439 
<a name="l00447"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a1dc7e93d0ae87f0eed6b7425b7d5e226">00447</a>     <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; <a class="code" href="classopenni_1_1_video_frame_ref.html#a1dc7e93d0ae87f0eed6b7425b7d5e226">getVideoMode</a>()<span class="keyword"> const</span>
<a name="l00448"></a>00448 <span class="keyword">    </span>{
<a name="l00449"></a>00449         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp;<span class="keyword">&gt;</span>(m_pFrame-&gt;videoMode);
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451 
<a name="l00459"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ab35db18e8668a71ac1105044d8881c8f">00459</a>     <span class="keyword">inline</span> uint64_t <a class="code" href="classopenni_1_1_video_frame_ref.html#ab35db18e8668a71ac1105044d8881c8f">getTimestamp</a>()<span class="keyword"> const</span>
<a name="l00460"></a>00460 <span class="keyword">    </span>{
<a name="l00461"></a>00461         <span class="keywordflow">return</span> m_pFrame-&gt;timestamp;
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463 
<a name="l00474"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ac5ae171717c0f0bb6850c4c2e745045c">00474</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ac5ae171717c0f0bb6850c4c2e745045c">getFrameIndex</a>()<span class="keyword"> const</span>
<a name="l00475"></a>00475 <span class="keyword">    </span>{
<a name="l00476"></a>00476         <span class="keywordflow">return</span> m_pFrame-&gt;frameIndex;
<a name="l00477"></a>00477     }
<a name="l00478"></a>00478 
<a name="l00485"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a6cfc6f11fe07f3d1a5d283b361f592da">00485</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a6cfc6f11fe07f3d1a5d283b361f592da">getWidth</a>()<span class="keyword"> const</span>
<a name="l00486"></a>00486 <span class="keyword">    </span>{
<a name="l00487"></a>00487         <span class="keywordflow">return</span> m_pFrame-&gt;width;
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489 
<a name="l00495"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a683e3f4b8e327021661ad4e2715de2bc">00495</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a683e3f4b8e327021661ad4e2715de2bc">getHeight</a>()<span class="keyword"> const</span>
<a name="l00496"></a>00496 <span class="keyword">    </span>{
<a name="l00497"></a>00497         <span class="keywordflow">return</span> m_pFrame-&gt;height;
<a name="l00498"></a>00498     }
<a name="l00499"></a>00499 
<a name="l00504"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad1f58ce43de4ce5d107aa013006d9666">00504</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ad1f58ce43de4ce5d107aa013006d9666">getCroppingEnabled</a>()<span class="keyword"> const</span>
<a name="l00505"></a>00505 <span class="keyword">    </span>{
<a name="l00506"></a>00506         <span class="keywordflow">return</span> m_pFrame-&gt;croppingEnabled == TRUE;
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 
<a name="l00513"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#ad7e1230755e708988280d5920f92cd6b">00513</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#ad7e1230755e708988280d5920f92cd6b">getCropOriginX</a>()<span class="keyword"> const</span>
<a name="l00514"></a>00514 <span class="keyword">    </span>{
<a name="l00515"></a>00515         <span class="keywordflow">return</span> m_pFrame-&gt;cropOriginX;
<a name="l00516"></a>00516     }
<a name="l00517"></a>00517 
<a name="l00522"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a137500fe04989b64522d81aac9f95217">00522</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a137500fe04989b64522d81aac9f95217">getCropOriginY</a>()<span class="keyword"> const</span>
<a name="l00523"></a>00523 <span class="keyword">    </span>{
<a name="l00524"></a>00524         <span class="keywordflow">return</span> m_pFrame-&gt;cropOriginY;
<a name="l00525"></a>00525     }
<a name="l00526"></a>00526 
<a name="l00532"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a73df1d5be3af74f80297aeef5c6b1655">00532</a>     <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a73df1d5be3af74f80297aeef5c6b1655">getStrideInBytes</a>()<span class="keyword"> const</span>
<a name="l00533"></a>00533 <span class="keyword">    </span>{
<a name="l00534"></a>00534         <span class="keywordflow">return</span> m_pFrame-&gt;stride;
<a name="l00535"></a>00535     }
<a name="l00536"></a>00536 
<a name="l00540"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a6b426ef8a97df059c1a35906c7f154d5">00540</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#a6b426ef8a97df059c1a35906c7f154d5">isValid</a>()<span class="keyword"> const</span>
<a name="l00541"></a>00541 <span class="keyword">    </span>{
<a name="l00542"></a>00542         <span class="keywordflow">return</span> m_pFrame != NULL;
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00549"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">00549</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>()
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551         <span class="keywordflow">if</span> (m_pFrame != NULL)
<a name="l00552"></a>00552         {
<a name="l00553"></a>00553             oniFrameRelease(m_pFrame);
<a name="l00554"></a>00554             m_pFrame = NULL;
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557 
<a name="l00559"></a>00559     <span class="keywordtype">void</span> _setFrame(OniFrame* pFrame)
<a name="l00560"></a>00560     {
<a name="l00561"></a>00561         setReference(pFrame);
<a name="l00562"></a>00562         <span class="keywordflow">if</span> (pFrame != NULL)
<a name="l00563"></a>00563         {
<a name="l00564"></a>00564             oniFrameAddRef(pFrame);
<a name="l00565"></a>00565         }
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 
<a name="l00569"></a>00569     OniFrame* _getFrame()
<a name="l00570"></a>00570     {
<a name="l00571"></a>00571         <span class="keywordflow">return</span> m_pFrame;
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 <span class="keyword">private</span>:
<a name="l00575"></a><a class="code" href="classopenni_1_1_video_frame_ref.html#a4fd1028f691947151ea08e0db214f01c">00575</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00576"></a>00576     <span class="keyword">inline</span> <span class="keywordtype">void</span> setReference(OniFrame* pFrame)
<a name="l00577"></a>00577     {
<a name="l00578"></a>00578         <span class="comment">// Initial - don&#39;t addref. This is the reference from OpenNI</span>
<a name="l00579"></a>00579         <a class="code" href="classopenni_1_1_video_frame_ref.html#aab68b2fe1564d62d739f09edca037ae3">release</a>();
<a name="l00580"></a>00580         m_pFrame = pFrame;
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583     OniFrame* m_pFrame; <span class="comment">// const!!?</span>
<a name="l00584"></a>00584 };
<a name="l00585"></a>00585 
<a name="l00607"></a><a class="code" href="classopenni_1_1_video_stream.html">00607</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>
<a name="l00608"></a>00608 {
<a name="l00609"></a>00609 <span class="keyword">public</span>:
<a name="l00617"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">00617</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>
<a name="l00618"></a>00618     {
<a name="l00619"></a>00619     <span class="keyword">public</span>:
<a name="l00623"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a73fb0101631bc1da7eeae056d73d78fc">00623</a>         <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a73fb0101631bc1da7eeae056d73d78fc">NewFrameListener</a>() : m_callbackHandle(NULL)
<a name="l00624"></a>00624         {
<a name="l00625"></a>00625         }
<a name="l00626"></a>00626 
<a name="l00627"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#ab9edd2ad37826a0c45a2379bfbec8456">00627</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#ab9edd2ad37826a0c45a2379bfbec8456">~NewFrameListener</a>()
<a name="l00628"></a>00628         {
<a name="l00629"></a>00629         }
<a name="l00630"></a>00630 
<a name="l00634"></a>00634         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a5f6a771b3f48e2217d036bd1c6b520a4">onNewFrame</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp;) = 0;
<a name="l00635"></a>00635 
<a name="l00636"></a>00636     <span class="keyword">private</span>:
<a name="l00637"></a><a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a4fd1028f691947151ea08e0db214f01c">00637</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00638"></a>00638 
<a name="l00639"></a>00639         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE callback(OniStreamHandle streamHandle, <span class="keywordtype">void</span>* pCookie)
<a name="l00640"></a>00640         {
<a name="l00641"></a>00641             <a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener = (<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>*)pCookie;
<a name="l00642"></a>00642             <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a> stream;
<a name="l00643"></a>00643             stream._setHandle(streamHandle);
<a name="l00644"></a>00644             pListener-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html#a5f6a771b3f48e2217d036bd1c6b520a4">onNewFrame</a>(stream);
<a name="l00645"></a>00645             stream._setHandle(NULL);
<a name="l00646"></a>00646         }
<a name="l00647"></a>00647         OniCallbackHandle m_callbackHandle;
<a name="l00648"></a>00648     };
<a name="l00649"></a>00649 
<a name="l00650"></a><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">00650</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>
<a name="l00651"></a>00651     {
<a name="l00652"></a>00652     <span class="keyword">public</span>:
<a name="l00653"></a><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a39da40d628ef970086d45c7886793c7f">00653</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a39da40d628ef970086d45c7886793c7f">~FrameAllocator</a>() {}
<a name="l00654"></a>00654         <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a87d1de1d474d7ebf0c17830e26b685ce">allocateFrameBuffer</a>(<span class="keywordtype">int</span> size) = 0;
<a name="l00655"></a>00655         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#aaa309f4045027b32efe305f67403dc9b">freeFrameBuffer</a>(<span class="keywordtype">void</span>* data) = 0;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657     <span class="keyword">private</span>:
<a name="l00658"></a><a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a4fd1028f691947151ea08e0db214f01c">00658</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l00659"></a>00659 
<a name="l00660"></a>00660         <span class="keyword">static</span> <span class="keywordtype">void</span>* ONI_CALLBACK_TYPE allocateFrameBufferCallback(<span class="keywordtype">int</span> size, <span class="keywordtype">void</span>* pCookie)
<a name="l00661"></a>00661         {
<a name="l00662"></a>00662             <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>* pThis = (<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>*)pCookie;
<a name="l00663"></a>00663             <span class="keywordflow">return</span> pThis-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#a87d1de1d474d7ebf0c17830e26b685ce">allocateFrameBuffer</a>(size);
<a name="l00664"></a>00664         }
<a name="l00665"></a>00665 
<a name="l00666"></a>00666         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE freeFrameBufferCallback(<span class="keywordtype">void</span>* data, <span class="keywordtype">void</span>* pCookie)
<a name="l00667"></a>00667         {
<a name="l00668"></a>00668             <a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>* pThis = (<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>*)pCookie;
<a name="l00669"></a>00669             pThis-&gt;<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html#aaa309f4045027b32efe305f67403dc9b">freeFrameBuffer</a>(data);
<a name="l00670"></a>00670         }
<a name="l00671"></a>00671     };
<a name="l00672"></a>00672 
<a name="l00677"></a><a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">00677</a>     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>() : m_stream(NULL), m_sensorInfo(), m_pCameraSettings(NULL), m_isOwner(true)
<a name="l00678"></a>00678     {}
<a name="l00679"></a>00679 
<a name="l00684"></a><a class="code" href="classopenni_1_1_video_stream.html#acf94ebb74dc4171be8e52d891ea60823">00684</a>     <span class="keyword">explicit</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>(OniStreamHandle handle) : m_stream(NULL), m_sensorInfo(), m_pCameraSettings(NULL), m_isOwner(false)
<a name="l00685"></a>00685     {
<a name="l00686"></a>00686         _setHandle(handle);
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688 
<a name="l00693"></a><a class="code" href="classopenni_1_1_video_stream.html#a063149ee3a46d499af3819565156c818">00693</a>     <a class="code" href="classopenni_1_1_video_stream.html#a063149ee3a46d499af3819565156c818">~VideoStream</a>()
<a name="l00694"></a>00694     {
<a name="l00695"></a>00695         <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">destroy</a>();
<a name="l00696"></a>00696     }
<a name="l00697"></a>00697 
<a name="l00702"></a><a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">00702</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>()<span class="keyword"> const</span>
<a name="l00703"></a>00703 <span class="keyword">    </span>{
<a name="l00704"></a>00704         <span class="keywordflow">return</span> m_stream != NULL;
<a name="l00705"></a>00705     }
<a name="l00706"></a>00706 
<a name="l00716"></a>00716     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">create</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; device, <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType);
<a name="l00717"></a>00717 
<a name="l00723"></a>00723     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">destroy</a>();
<a name="l00724"></a>00724 
<a name="l00733"></a><a class="code" href="classopenni_1_1_video_stream.html#aede2670a0035d933929d7c7a9356edc5">00733</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>&amp; <a class="code" href="classopenni_1_1_video_stream.html#aede2670a0035d933929d7c7a9356edc5">getSensorInfo</a>()<span class="keyword"> const</span>
<a name="l00734"></a>00734 <span class="keyword">    </span>{
<a name="l00735"></a>00735         <span class="keywordflow">return</span> m_sensorInfo;
<a name="l00736"></a>00736     }
<a name="l00737"></a>00737 
<a name="l00741"></a><a class="code" href="classopenni_1_1_video_stream.html#a090d4873ab30dac86d29005831ffbd77">00741</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a090d4873ab30dac86d29005831ffbd77">start</a>()
<a name="l00742"></a>00742     {
<a name="l00743"></a>00743         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00744"></a>00744         {
<a name="l00745"></a>00745             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00746"></a>00746         }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamStart(m_stream);
<a name="l00749"></a>00749     }
<a name="l00750"></a>00750 
<a name="l00754"></a><a class="code" href="classopenni_1_1_video_stream.html#a55fc279dd603a694ee5f5ec074592dce">00754</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#a55fc279dd603a694ee5f5ec074592dce">stop</a>()
<a name="l00755"></a>00755     {
<a name="l00756"></a>00756         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00757"></a>00757         {
<a name="l00758"></a>00758             <span class="keywordflow">return</span>;
<a name="l00759"></a>00759         }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761         oniStreamStop(m_stream);
<a name="l00762"></a>00762     }
<a name="l00763"></a>00763 
<a name="l00774"></a><a class="code" href="classopenni_1_1_video_stream.html#a1610b8aaa89e0f39a607b9780ba9ab77">00774</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a1610b8aaa89e0f39a607b9780ba9ab77">readFrame</a>(<a class="code" href="classopenni_1_1_video_frame_ref.html">VideoFrameRef</a>* pFrame)
<a name="l00775"></a>00775     {
<a name="l00776"></a>00776         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00777"></a>00777         {
<a name="l00778"></a>00778             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00779"></a>00779         }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781         OniFrame* pOniFrame;
<a name="l00782"></a>00782         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamReadFrame(m_stream, &amp;pOniFrame);
<a name="l00783"></a>00783 
<a name="l00784"></a>00784         pFrame-&gt;setReference(pOniFrame);
<a name="l00785"></a>00785         <span class="keywordflow">return</span> rc;
<a name="l00786"></a>00786     }
<a name="l00787"></a>00787 
<a name="l00795"></a><a class="code" href="classopenni_1_1_video_stream.html#a72da62972b0f042d2e4d6b4e1bf3605a">00795</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72da62972b0f042d2e4d6b4e1bf3605a">addNewFrameListener</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener)
<a name="l00796"></a>00796     {
<a name="l00797"></a>00797         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00798"></a>00798         {
<a name="l00799"></a>00799             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00800"></a>00800         }
<a name="l00801"></a>00801 
<a name="l00802"></a>00802         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamRegisterNewFrameCallback(m_stream, pListener-&gt;callback, pListener, &amp;pListener-&gt;m_callbackHandle);
<a name="l00803"></a>00803     }
<a name="l00804"></a>00804 
<a name="l00809"></a><a class="code" href="classopenni_1_1_video_stream.html#a4842ff4f5b1be4c668f0c616b98aaa92">00809</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#a4842ff4f5b1be4c668f0c616b98aaa92">removeNewFrameListener</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_new_frame_listener.html">NewFrameListener</a>* pListener)
<a name="l00810"></a>00810     {
<a name="l00811"></a>00811         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00812"></a>00812         {
<a name="l00813"></a>00813             <span class="keywordflow">return</span>;
<a name="l00814"></a>00814         }
<a name="l00815"></a>00815 
<a name="l00816"></a>00816         oniStreamUnregisterNewFrameCallback(m_stream, pListener-&gt;m_callbackHandle);
<a name="l00817"></a>00817         pListener-&gt;m_callbackHandle = NULL;
<a name="l00818"></a>00818     }
<a name="l00819"></a>00819 
<a name="l00825"></a><a class="code" href="classopenni_1_1_video_stream.html#a627e6d5b3ddf2032693275780913d1ee">00825</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a627e6d5b3ddf2032693275780913d1ee">setFrameBuffersAllocator</a>(<a class="code" href="classopenni_1_1_video_stream_1_1_frame_allocator.html">FrameAllocator</a>* pAllocator)
<a name="l00826"></a>00826     {
<a name="l00827"></a>00827         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00828"></a>00828         {
<a name="l00829"></a>00829             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00830"></a>00830         }
<a name="l00831"></a>00831 
<a name="l00832"></a>00832         <span class="keywordflow">if</span> (pAllocator == NULL)
<a name="l00833"></a>00833         {
<a name="l00834"></a>00834             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetFrameBuffersAllocator(m_stream, NULL, NULL, NULL);
<a name="l00835"></a>00835         }
<a name="l00836"></a>00836         <span class="keywordflow">else</span>
<a name="l00837"></a>00837         {
<a name="l00838"></a>00838             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetFrameBuffersAllocator(m_stream, pAllocator-&gt;allocateFrameBufferCallback, pAllocator-&gt;freeFrameBufferCallback, pAllocator);
<a name="l00839"></a>00839         }
<a name="l00840"></a>00840     }
<a name="l00841"></a>00841 
<a name="l00846"></a>00846     OniStreamHandle _getHandle()<span class="keyword"> const</span>
<a name="l00847"></a>00847 <span class="keyword">    </span>{
<a name="l00848"></a>00848         <span class="keywordflow">return</span> m_stream;
<a name="l00849"></a>00849     }
<a name="l00850"></a>00850 
<a name="l00855"></a><a class="code" href="classopenni_1_1_video_stream.html#a029f6df9d50d1f125c0ec2c7f2b6574f">00855</a>     <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>* <a class="code" href="classopenni_1_1_video_stream.html#a029f6df9d50d1f125c0ec2c7f2b6574f">getCameraSettings</a>() {<span class="keywordflow">return</span> m_pCameraSettings;}
<a name="l00856"></a>00856 
<a name="l00867"></a><a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">00867</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span>* dataSize)<span class="keyword"> const</span>
<a name="l00868"></a>00868 <span class="keyword">    </span>{
<a name="l00869"></a>00869         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00870"></a>00870         {
<a name="l00871"></a>00871             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00872"></a>00872         }
<a name="l00873"></a>00873 
<a name="l00874"></a>00874         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamGetProperty(m_stream, propertyId, data, dataSize);
<a name="l00875"></a>00875     }
<a name="l00876"></a>00876 
<a name="l00887"></a><a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">00887</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l00888"></a>00888     {
<a name="l00889"></a>00889         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l00890"></a>00890         {
<a name="l00891"></a>00891             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l00892"></a>00892         }
<a name="l00893"></a>00893 
<a name="l00894"></a>00894         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamSetProperty(m_stream, propertyId, data, dataSize);
<a name="l00895"></a>00895     }
<a name="l00896"></a>00896 
<a name="l00903"></a><a class="code" href="classopenni_1_1_video_stream.html#a8fb28ca1b61d1ecabd28d08633e927ab">00903</a>     <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> <a class="code" href="classopenni_1_1_video_stream.html#a8fb28ca1b61d1ecabd28d08633e927ab">getVideoMode</a>()<span class="keyword"> const</span>
<a name="l00904"></a>00904 <span class="keyword">    </span>{
<a name="l00905"></a>00905         <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a> videoMode;
<a name="l00906"></a>00906         getProperty&lt;OniVideoMode&gt;(STREAM_PROPERTY_VIDEO_MODE, <span class="keyword">static_cast&lt;</span>OniVideoMode*<span class="keyword">&gt;</span>(&amp;videoMode));
<a name="l00907"></a>00907         <span class="keywordflow">return</span> videoMode;
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909 
<a name="l00918"></a><a class="code" href="classopenni_1_1_video_stream.html#a542e98aecfcdfc5c38079d80960af5d2">00918</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a542e98aecfcdfc5c38079d80960af5d2">setVideoMode</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_mode.html">VideoMode</a>&amp; videoMode)
<a name="l00919"></a>00919     {
<a name="l00920"></a>00920         <span class="keywordflow">return</span> setProperty&lt;OniVideoMode&gt;(STREAM_PROPERTY_VIDEO_MODE, <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>OniVideoMode&amp;<span class="keyword">&gt;</span>(videoMode));
<a name="l00921"></a>00921     }
<a name="l00922"></a>00922 
<a name="l00928"></a><a class="code" href="classopenni_1_1_video_stream.html#a28120b50c843e3062a756c92ed485281">00928</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_stream.html#a28120b50c843e3062a756c92ed485281">getMaxPixelValue</a>()<span class="keyword"> const</span>
<a name="l00929"></a>00929 <span class="keyword">    </span>{
<a name="l00930"></a>00930         <span class="keywordtype">int</span> maxValue;
<a name="l00931"></a>00931         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;int&gt;(STREAM_PROPERTY_MAX_VALUE, &amp;maxValue);
<a name="l00932"></a>00932         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00933"></a>00933         {
<a name="l00934"></a>00934             <span class="keywordflow">return</span> 0;
<a name="l00935"></a>00935         }
<a name="l00936"></a>00936         <span class="keywordflow">return</span> maxValue;
<a name="l00937"></a>00937     }
<a name="l00938"></a>00938 
<a name="l00944"></a><a class="code" href="classopenni_1_1_video_stream.html#a00fb26ce13b2509eb8f9a6d0290697b9">00944</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_video_stream.html#a00fb26ce13b2509eb8f9a6d0290697b9">getMinPixelValue</a>()<span class="keyword"> const</span>
<a name="l00945"></a>00945 <span class="keyword">    </span>{
<a name="l00946"></a>00946         <span class="keywordtype">int</span> minValue;
<a name="l00947"></a>00947         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;int&gt;(STREAM_PROPERTY_MIN_VALUE, &amp;minValue);
<a name="l00948"></a>00948         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00949"></a>00949         {
<a name="l00950"></a>00950             <span class="keywordflow">return</span> 0;
<a name="l00951"></a>00951         }
<a name="l00952"></a>00952         <span class="keywordflow">return</span> minValue;
<a name="l00953"></a>00953     }
<a name="l00954"></a>00954 
<a name="l00959"></a><a class="code" href="classopenni_1_1_video_stream.html#a05345182b0d9d8b967a9575980a5523e">00959</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#a05345182b0d9d8b967a9575980a5523e">isCroppingSupported</a>()<span class="keyword"> const</span>
<a name="l00960"></a>00960 <span class="keyword">    </span>{
<a name="l00961"></a>00961         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_CROPPING);
<a name="l00962"></a>00962     }
<a name="l00963"></a>00963 
<a name="l00972"></a><a class="code" href="classopenni_1_1_video_stream.html#aa3f5d33e2d3bdf0416a427617b8cb180">00972</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#aa3f5d33e2d3bdf0416a427617b8cb180">getCropping</a>(<span class="keywordtype">int</span>* pOriginX, <span class="keywordtype">int</span>* pOriginY, <span class="keywordtype">int</span>* pWidth, <span class="keywordtype">int</span>* pHeight)<span class="keyword"> const</span>
<a name="l00973"></a>00973 <span class="keyword">    </span>{
<a name="l00974"></a>00974         OniCropping cropping;
<a name="l00975"></a>00975         <span class="keywordtype">bool</span> enabled = <span class="keyword">false</span>;
<a name="l00976"></a>00976 
<a name="l00977"></a>00977         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, &amp;cropping);
<a name="l00978"></a>00978 
<a name="l00979"></a>00979         <span class="keywordflow">if</span> (rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l00980"></a>00980         {
<a name="l00981"></a>00981             *pOriginX = cropping.originX;
<a name="l00982"></a>00982             *pOriginY = cropping.originY;
<a name="l00983"></a>00983             *pWidth = cropping.width;
<a name="l00984"></a>00984             *pHeight = cropping.height;
<a name="l00985"></a>00985             enabled = (cropping.enabled == TRUE);
<a name="l00986"></a>00986         }
<a name="l00987"></a>00987 
<a name="l00988"></a>00988         <span class="keywordflow">return</span> enabled;
<a name="l00989"></a>00989     }
<a name="l00990"></a>00990 
<a name="l01000"></a><a class="code" href="classopenni_1_1_video_stream.html#a5b3bc3ef4e531496f875fdbf6604a157">01000</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a5b3bc3ef4e531496f875fdbf6604a157">setCropping</a>(<span class="keywordtype">int</span> originX, <span class="keywordtype">int</span> originY, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l01001"></a>01001     {
<a name="l01002"></a>01002         OniCropping cropping;
<a name="l01003"></a>01003         cropping.enabled = <span class="keyword">true</span>;
<a name="l01004"></a>01004         cropping.originX = originX;
<a name="l01005"></a>01005         cropping.originY = originY;
<a name="l01006"></a>01006         cropping.width = width;
<a name="l01007"></a>01007         cropping.height = height;
<a name="l01008"></a>01008         <span class="keywordflow">return</span> setProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, cropping);
<a name="l01009"></a>01009     }
<a name="l01010"></a>01010 
<a name="l01015"></a><a class="code" href="classopenni_1_1_video_stream.html#ae3f8fc2698c14d85667d35d358d4643c">01015</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#ae3f8fc2698c14d85667d35d358d4643c">resetCropping</a>()
<a name="l01016"></a>01016     {
<a name="l01017"></a>01017         OniCropping cropping;
<a name="l01018"></a>01018         cropping.enabled = <span class="keyword">false</span>;
<a name="l01019"></a>01019         <span class="keywordflow">return</span> setProperty&lt;OniCropping&gt;(STREAM_PROPERTY_CROPPING, cropping);
<a name="l01020"></a>01020     }
<a name="l01021"></a>01021 
<a name="l01026"></a><a class="code" href="classopenni_1_1_video_stream.html#aad5a1e2f4eeba20896d2b9ef04a52e7a">01026</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#aad5a1e2f4eeba20896d2b9ef04a52e7a">getMirroringEnabled</a>()<span class="keyword"> const</span>
<a name="l01027"></a>01027 <span class="keyword">    </span>{
<a name="l01028"></a>01028         OniBool enabled;
<a name="l01029"></a>01029         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;OniBool&gt;(STREAM_PROPERTY_MIRRORING, &amp;enabled);
<a name="l01030"></a>01030         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01031"></a>01031         {
<a name="l01032"></a>01032             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01033"></a>01033         }
<a name="l01034"></a>01034         <span class="keywordflow">return</span> enabled == TRUE;
<a name="l01035"></a>01035     }
<a name="l01036"></a>01036 
<a name="l01042"></a><a class="code" href="classopenni_1_1_video_stream.html#af34b31b62f0ae9d1772b6ff85ef0bae5">01042</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#af34b31b62f0ae9d1772b6ff85ef0bae5">setMirroringEnabled</a>(<span class="keywordtype">bool</span> isEnabled)
<a name="l01043"></a>01043     {
<a name="l01044"></a>01044         <span class="keywordflow">return</span> setProperty&lt;OniBool&gt;(STREAM_PROPERTY_MIRRORING, isEnabled ? TRUE : FALSE);
<a name="l01045"></a>01045     }
<a name="l01046"></a>01046 
<a name="l01051"></a><a class="code" href="classopenni_1_1_video_stream.html#a9f8887507198057129befc8f448c7cb0">01051</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_video_stream.html#a9f8887507198057129befc8f448c7cb0">getHorizontalFieldOfView</a>()<span class="keyword"> const</span>
<a name="l01052"></a>01052 <span class="keyword">    </span>{
<a name="l01053"></a>01053         <span class="keywordtype">float</span> horizontal = 0;
<a name="l01054"></a>01054         getProperty&lt;float&gt;(STREAM_PROPERTY_HORIZONTAL_FOV, &amp;horizontal);
<a name="l01055"></a>01055         <span class="keywordflow">return</span> horizontal;
<a name="l01056"></a>01056     }
<a name="l01057"></a>01057 
<a name="l01062"></a><a class="code" href="classopenni_1_1_video_stream.html#a804549dfa750664943368ee6b304da31">01062</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_video_stream.html#a804549dfa750664943368ee6b304da31">getVerticalFieldOfView</a>()<span class="keyword"> const</span>
<a name="l01063"></a>01063 <span class="keyword">    </span>{
<a name="l01064"></a>01064         <span class="keywordtype">float</span> vertical = 0;
<a name="l01065"></a>01065         getProperty&lt;float&gt;(STREAM_PROPERTY_VERTICAL_FOV, &amp;vertical);
<a name="l01066"></a>01066         <span class="keywordflow">return</span> vertical;
<a name="l01067"></a>01067     }
<a name="l01068"></a>01068 
<a name="l01078"></a>01078     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01079"></a><a class="code" href="classopenni_1_1_video_stream.html#a915f6710f0818b24996daab96c5124ce">01079</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01080"></a>01080     {
<a name="l01081"></a>01081         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01082"></a>01082     }
<a name="l01083"></a>01083 
<a name="l01093"></a>01093     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01094"></a><a class="code" href="classopenni_1_1_video_stream.html#aa0916a3aa5ae7afa1a360c2ce4d642e8">01094</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01095"></a>01095 <span class="keyword">    </span>{
<a name="l01096"></a>01096         <span class="keywordtype">int</span> size = <span class="keyword">sizeof</span>(T);
<a name="l01097"></a>01097         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>(propertyId, value, &amp;size);
<a name="l01098"></a>01098     }
<a name="l01099"></a>01099 
<a name="l01105"></a><a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">01105</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(<span class="keywordtype">int</span> propertyId)<span class="keyword"> const</span>
<a name="l01106"></a>01106 <span class="keyword">    </span>{
<a name="l01107"></a>01107         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01108"></a>01108         {
<a name="l01109"></a>01109             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01110"></a>01110         }
<a name="l01111"></a>01111 
<a name="l01112"></a>01112         <span class="keywordflow">return</span> oniStreamIsPropertySupported(m_stream, propertyId) == TRUE;
<a name="l01113"></a>01113     }
<a name="l01114"></a>01114 
<a name="l01124"></a><a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">01124</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01125"></a>01125     {
<a name="l01126"></a>01126         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01127"></a>01127         {
<a name="l01128"></a>01128             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l01129"></a>01129         }
<a name="l01130"></a>01130 
<a name="l01131"></a>01131         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamInvoke(m_stream, commandId, data, dataSize);
<a name="l01132"></a>01132     }
<a name="l01133"></a>01133 
<a name="l01143"></a>01143     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01144"></a><a class="code" href="classopenni_1_1_video_stream.html#a766858a79175545e8f509c652f6390c7">01144</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(<span class="keywordtype">int</span> commandId, T&amp; value)
<a name="l01145"></a>01145     {
<a name="l01146"></a>01146         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_video_stream.html#aaa6363371fa11f76e431462e913cffe2">invoke</a>(commandId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01147"></a>01147     }
<a name="l01148"></a>01148 
<a name="l01154"></a><a class="code" href="classopenni_1_1_video_stream.html#a565db7c7a9d7f13960219c5d491898b7">01154</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_video_stream.html#a565db7c7a9d7f13960219c5d491898b7">isCommandSupported</a>(<span class="keywordtype">int</span> commandId)<span class="keyword"> const</span>
<a name="l01155"></a>01155 <span class="keyword">    </span>{
<a name="l01156"></a>01156         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l01157"></a>01157         {
<a name="l01158"></a>01158             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01159"></a>01159         }
<a name="l01160"></a>01160 
<a name="l01161"></a>01161         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniStreamIsCommandSupported(m_stream, commandId) == TRUE;
<a name="l01162"></a>01162     }
<a name="l01163"></a>01163 
<a name="l01164"></a>01164 <span class="keyword">private</span>:
<a name="l01165"></a><a class="code" href="classopenni_1_1_video_stream.html#a520fa05e0bf58785da428f7a0241eee2">01165</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l01166"></a>01166 
<a name="l01167"></a>01167     <span class="keywordtype">void</span> _setHandle(OniStreamHandle stream)
<a name="l01168"></a>01168     {
<a name="l01169"></a>01169         m_sensorInfo._setInternal(NULL);
<a name="l01170"></a>01170         m_stream = stream;
<a name="l01171"></a>01171 
<a name="l01172"></a>01172         <span class="keywordflow">if</span> (stream != NULL)
<a name="l01173"></a>01173         {
<a name="l01174"></a>01174             m_sensorInfo._setInternal(oniStreamGetSensorInfo(m_stream));
<a name="l01175"></a>01175         }
<a name="l01176"></a>01176     }
<a name="l01177"></a>01177 
<a name="l01178"></a>01178 <span class="keyword">private</span>:
<a name="l01179"></a>01179     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; other);
<a name="l01180"></a>01180     <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html#ad9e23fcc619535149c8833eea9fc2918">VideoStream</a>&amp; other);
<a name="l01181"></a>01181 
<a name="l01182"></a>01182     OniStreamHandle m_stream;
<a name="l01183"></a>01183     SensorInfo m_sensorInfo;
<a name="l01184"></a>01184     CameraSettings* m_pCameraSettings;
<a name="l01185"></a>01185     <span class="keywordtype">bool</span> m_isOwner;
<a name="l01186"></a>01186 };
<a name="l01187"></a>01187 
<a name="l01204"></a><a class="code" href="classopenni_1_1_device.html">01204</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>
<a name="l01205"></a>01205 {
<a name="l01206"></a>01206 <span class="keyword">public</span>:
<a name="l01211"></a><a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">01211</a>     <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>() : m_pPlaybackControl(NULL), m_device(NULL), m_isOwner(true)
<a name="l01212"></a>01212     {
<a name="l01213"></a>01213         clearSensors();
<a name="l01214"></a>01214     }
<a name="l01215"></a>01215 
<a name="l01220"></a><a class="code" href="classopenni_1_1_device.html#a59056d375ecb412a1b26da76c500a74e">01220</a>     <span class="keyword">explicit</span> <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>(OniDeviceHandle handle) : m_pPlaybackControl(NULL), m_device(NULL), m_isOwner(false)
<a name="l01221"></a>01221     {
<a name="l01222"></a>01222         _setHandle(handle);
<a name="l01223"></a>01223     }
<a name="l01224"></a>01224 
<a name="l01229"></a><a class="code" href="classopenni_1_1_device.html#a5faa442b23dfef84aa77d9117980a3ab">01229</a>     <a class="code" href="classopenni_1_1_device.html#a5faa442b23dfef84aa77d9117980a3ab">~Device</a>()
<a name="l01230"></a>01230     {
<a name="l01231"></a>01231         <span class="keywordflow">if</span> (m_device != NULL)
<a name="l01232"></a>01232         {
<a name="l01233"></a>01233             <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">close</a>();
<a name="l01234"></a>01234         }
<a name="l01235"></a>01235     }
<a name="l01236"></a>01236 
<a name="l01266"></a>01266     <span class="keyword">inline</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri);
<a name="l01267"></a>01267 
<a name="l01273"></a>01273     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">close</a>();
<a name="l01274"></a>01274 
<a name="l01284"></a><a class="code" href="classopenni_1_1_device.html#a3e69ec283c5f886018d9bbbc09f29122">01284</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>&amp; <a class="code" href="classopenni_1_1_device.html#a3e69ec283c5f886018d9bbbc09f29122">getDeviceInfo</a>()<span class="keyword"> const</span>
<a name="l01285"></a>01285 <span class="keyword">    </span>{
<a name="l01286"></a>01286         <span class="keywordflow">return</span> m_deviceInfo;
<a name="l01287"></a>01287     }
<a name="l01288"></a>01288 
<a name="l01296"></a><a class="code" href="classopenni_1_1_device.html#aff0664ccc8e969e4778fec07b6adf81f">01296</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aff0664ccc8e969e4778fec07b6adf81f">hasSensor</a>(<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l01297"></a>01297     {
<a name="l01298"></a>01298         <span class="keywordtype">int</span> i;
<a name="l01299"></a>01299         <span class="keywordflow">for</span> (i = 0; (i &lt; ONI_MAX_SENSORS) &amp;&amp; (m_aSensorInfo[i].m_pInfo != NULL); ++i)
<a name="l01300"></a>01300         {
<a name="l01301"></a>01301             <span class="keywordflow">if</span> (m_aSensorInfo[i].getSensorType() == sensorType)
<a name="l01302"></a>01302             {
<a name="l01303"></a>01303                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01304"></a>01304             }
<a name="l01305"></a>01305         }
<a name="l01306"></a>01306 
<a name="l01307"></a>01307         <span class="keywordflow">if</span> (i == ONI_MAX_SENSORS)
<a name="l01308"></a>01308         {
<a name="l01309"></a>01309             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01310"></a>01310         }
<a name="l01311"></a>01311 
<a name="l01312"></a>01312         <span class="keyword">const</span> OniSensorInfo* pInfo = oniDeviceGetSensorInfo(m_device, (OniSensorType)sensorType);
<a name="l01313"></a>01313 
<a name="l01314"></a>01314         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l01315"></a>01315         {
<a name="l01316"></a>01316             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01317"></a>01317         }
<a name="l01318"></a>01318 
<a name="l01319"></a>01319         m_aSensorInfo[i]._setInternal(pInfo);
<a name="l01320"></a>01320 
<a name="l01321"></a>01321         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01322"></a>01322     }
<a name="l01323"></a>01323 
<a name="l01331"></a><a class="code" href="classopenni_1_1_device.html#ae2f512f237ee1d3d464250a8bdb81925">01331</a>     <span class="keyword">const</span> <a class="code" href="classopenni_1_1_sensor_info.html">SensorInfo</a>* <a class="code" href="classopenni_1_1_device.html#ae2f512f237ee1d3d464250a8bdb81925">getSensorInfo</a>(<a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l01332"></a>01332     {
<a name="l01333"></a>01333         <span class="keywordtype">int</span> i;
<a name="l01334"></a>01334         <span class="keywordflow">for</span> (i = 0; (i &lt; ONI_MAX_SENSORS) &amp;&amp; (m_aSensorInfo[i].m_pInfo != NULL); ++i)
<a name="l01335"></a>01335         {
<a name="l01336"></a>01336             <span class="keywordflow">if</span> (m_aSensorInfo[i].getSensorType() == sensorType)
<a name="l01337"></a>01337             {
<a name="l01338"></a>01338                 <span class="keywordflow">return</span> &amp;m_aSensorInfo[i];
<a name="l01339"></a>01339             }
<a name="l01340"></a>01340         }
<a name="l01341"></a>01341 
<a name="l01342"></a>01342         <span class="comment">// not found. check to see we have additional space</span>
<a name="l01343"></a>01343         <span class="keywordflow">if</span> (i == ONI_MAX_SENSORS)
<a name="l01344"></a>01344         {
<a name="l01345"></a>01345             <span class="keywordflow">return</span> NULL;
<a name="l01346"></a>01346         }
<a name="l01347"></a>01347 
<a name="l01348"></a>01348         <span class="keyword">const</span> OniSensorInfo* pInfo = oniDeviceGetSensorInfo(m_device, (OniSensorType)sensorType);
<a name="l01349"></a>01349         <span class="keywordflow">if</span> (pInfo == NULL)
<a name="l01350"></a>01350         {
<a name="l01351"></a>01351             <span class="keywordflow">return</span> NULL;
<a name="l01352"></a>01352         }
<a name="l01353"></a>01353 
<a name="l01354"></a>01354         m_aSensorInfo[i]._setInternal(pInfo);
<a name="l01355"></a>01355         <span class="keywordflow">return</span> &amp;m_aSensorInfo[i];
<a name="l01356"></a>01356     }
<a name="l01357"></a>01357 
<a name="l01362"></a>01362     OniDeviceHandle _getHandle()<span class="keyword"> const</span>
<a name="l01363"></a>01363 <span class="keyword">    </span>{
<a name="l01364"></a>01364         <span class="keywordflow">return</span> m_device;
<a name="l01365"></a>01365     }
<a name="l01366"></a>01366 
<a name="l01371"></a><a class="code" href="classopenni_1_1_device.html#ab1b0ec1efd1dc208d1f11a91257d3f91">01371</a>     <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>* <a class="code" href="classopenni_1_1_device.html#ab1b0ec1efd1dc208d1f11a91257d3f91">getPlaybackControl</a>() {<span class="keywordflow">return</span> m_pPlaybackControl;}
<a name="l01372"></a>01372 
<a name="l01384"></a><a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">01384</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span>* dataSize)<span class="keyword"> const</span>
<a name="l01385"></a>01385 <span class="keyword">    </span>{
<a name="l01386"></a>01386         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceGetProperty(m_device, propertyId, data, dataSize);
<a name="l01387"></a>01387     }
<a name="l01388"></a>01388 
<a name="l01400"></a><a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">01400</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01401"></a>01401     {
<a name="l01402"></a>01402         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceSetProperty(m_device, propertyId, data, dataSize);
<a name="l01403"></a>01403     }
<a name="l01404"></a>01404 
<a name="l01412"></a><a class="code" href="classopenni_1_1_device.html#aaadcb55afcced08fcec9b3c88d98e39a">01412</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aaadcb55afcced08fcec9b3c88d98e39a">isImageRegistrationModeSupported</a>(<a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode)<span class="keyword"> const</span>
<a name="l01413"></a>01413 <span class="keyword">    </span>{
<a name="l01414"></a>01414         <span class="keywordflow">return</span> (oniDeviceIsImageRegistrationModeSupported(m_device, (OniImageRegistrationMode)mode) == TRUE);
<a name="l01415"></a>01415     }
<a name="l01416"></a>01416 
<a name="l01424"></a><a class="code" href="classopenni_1_1_device.html#a27b6ec5ffc1a851ee334d64eb94ca1a3">01424</a>     <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> <a class="code" href="classopenni_1_1_device.html#a27b6ec5ffc1a851ee334d64eb94ca1a3">getImageRegistrationMode</a>()<span class="keyword"> const</span>
<a name="l01425"></a>01425 <span class="keyword">    </span>{
<a name="l01426"></a>01426         <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode;
<a name="l01427"></a>01427         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty&lt;ImageRegistrationMode&gt;(DEVICE_PROPERTY_IMAGE_REGISTRATION, &amp;mode);
<a name="l01428"></a>01428         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01429"></a>01429         {
<a name="l01430"></a>01430             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9ca143ed30372dfe6638316fa04a3f1969d">IMAGE_REGISTRATION_OFF</a>;
<a name="l01431"></a>01431         }
<a name="l01432"></a>01432         <span class="keywordflow">return</span> mode;
<a name="l01433"></a>01433     }
<a name="l01434"></a>01434 
<a name="l01448"></a><a class="code" href="classopenni_1_1_device.html#a28161dabfe92ce624d7a805ff8f4ec6e">01448</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a28161dabfe92ce624d7a805ff8f4ec6e">setImageRegistrationMode</a>(<a class="code" href="namespaceopenni.html#a6c671425ce625070b9d913306198eb9c">ImageRegistrationMode</a> mode)
<a name="l01449"></a>01449     {
<a name="l01450"></a>01450         <span class="keywordflow">return</span> setProperty&lt;ImageRegistrationMode&gt;(DEVICE_PROPERTY_IMAGE_REGISTRATION, mode);
<a name="l01451"></a>01451     }
<a name="l01452"></a>01452 
<a name="l01457"></a><a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">01457</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>()<span class="keyword"> const</span>
<a name="l01458"></a>01458 <span class="keyword">    </span>{
<a name="l01459"></a>01459         <span class="keywordflow">return</span> m_device != NULL;
<a name="l01460"></a>01460     }
<a name="l01461"></a>01461 
<a name="l01466"></a><a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">01466</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>()<span class="keyword"> const</span>
<a name="l01467"></a>01467 <span class="keyword">    </span>{
<a name="l01468"></a>01468         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(DEVICE_PROPERTY_PLAYBACK_SPEED) &amp;&amp;
<a name="l01469"></a>01469             <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED) &amp;&amp;
<a name="l01470"></a>01470             <a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">isCommandSupported</a>(DEVICE_COMMAND_SEEK);
<a name="l01471"></a>01471     }
<a name="l01472"></a>01472 
<a name="l01481"></a><a class="code" href="classopenni_1_1_device.html#a94dfc240ffd2f8e777494d10814d5d07">01481</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a94dfc240ffd2f8e777494d10814d5d07">setDepthColorSyncEnabled</a>(<span class="keywordtype">bool</span> isEnabled)
<a name="l01482"></a>01482     {
<a name="l01483"></a>01483         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01484"></a>01484 
<a name="l01485"></a>01485         <span class="keywordflow">if</span> (isEnabled)
<a name="l01486"></a>01486         {
<a name="l01487"></a>01487             rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceEnableDepthColorSync(m_device);
<a name="l01488"></a>01488         }
<a name="l01489"></a>01489         <span class="keywordflow">else</span>
<a name="l01490"></a>01490         {
<a name="l01491"></a>01491             oniDeviceDisableDepthColorSync(m_device);
<a name="l01492"></a>01492         }
<a name="l01493"></a>01493 
<a name="l01494"></a>01494         <span class="keywordflow">return</span> rc;
<a name="l01495"></a>01495     }
<a name="l01496"></a>01496 
<a name="l01497"></a><a class="code" href="classopenni_1_1_device.html#af01251ba63a30cac547511e7af71c920">01497</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#af01251ba63a30cac547511e7af71c920">getDepthColorSyncEnabled</a>()
<a name="l01498"></a>01498     {
<a name="l01499"></a>01499         <span class="keywordflow">return</span> oniDeviceGetDepthColorSyncEnabled(m_device) == TRUE;
<a name="l01500"></a>01500     }
<a name="l01501"></a>01501 
<a name="l01512"></a>01512     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01513"></a><a class="code" href="classopenni_1_1_device.html#a0879db9460aa56f1b85b4dcd569f797c">01513</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01514"></a>01514     {
<a name="l01515"></a>01515         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01516"></a>01516     }
<a name="l01517"></a>01517 
<a name="l01527"></a>01527     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01528"></a><a class="code" href="classopenni_1_1_device.html#ab3a1a6566e8c95eaf759114a946806f9">01528</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01529"></a>01529 <span class="keyword">    </span>{
<a name="l01530"></a>01530         <span class="keywordtype">int</span> size = <span class="keyword">sizeof</span>(T);
<a name="l01531"></a>01531         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>(propertyId, value, &amp;size);
<a name="l01532"></a>01532     }
<a name="l01533"></a>01533 
<a name="l01539"></a><a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">01539</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#af39a1ebd7f9f2e4a39566e86fa881d43">isPropertySupported</a>(<span class="keywordtype">int</span> propertyId)<span class="keyword"> const</span>
<a name="l01540"></a>01540 <span class="keyword">    </span>{
<a name="l01541"></a>01541         <span class="keywordflow">return</span> oniDeviceIsPropertySupported(m_device, propertyId) == TRUE;
<a name="l01542"></a>01542     }
<a name="l01543"></a>01543 
<a name="l01553"></a><a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">01553</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(<span class="keywordtype">int</span> commandId, <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> dataSize)
<a name="l01554"></a>01554     {
<a name="l01555"></a>01555         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceInvoke(m_device, commandId, data, dataSize);
<a name="l01556"></a>01556     }
<a name="l01557"></a>01557 
<a name="l01567"></a>01567     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01568"></a><a class="code" href="classopenni_1_1_device.html#ab2d93274884a29de212e5346c2f221b2">01568</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(<span class="keywordtype">int</span> propertyId, T&amp; value)
<a name="l01569"></a>01569     {
<a name="l01570"></a>01570         <span class="keywordflow">return</span> <a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(propertyId, &amp;value, <span class="keyword">sizeof</span>(T));
<a name="l01571"></a>01571     }
<a name="l01572"></a>01572 
<a name="l01578"></a><a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">01578</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_device.html#a65af6533d3c51656cccaedd4773a47a0">isCommandSupported</a>(<span class="keywordtype">int</span> commandId)<span class="keyword"> const</span>
<a name="l01579"></a>01579 <span class="keyword">    </span>{
<a name="l01580"></a>01580         <span class="keywordflow">return</span> oniDeviceIsCommandSupported(m_device, commandId) == TRUE;
<a name="l01581"></a>01581     }
<a name="l01582"></a>01582 
<a name="l01583"></a>01583 <span class="keyword">private</span>:
<a name="l01584"></a>01584     <a class="code" href="classopenni_1_1_device.html#a1216228442de43e088a66ddf3f21c846">Device</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp;);
<a name="l01585"></a>01585     <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp;);
<a name="l01586"></a>01586 
<a name="l01587"></a>01587     <span class="keywordtype">void</span> clearSensors()
<a name="l01588"></a>01588     {
<a name="l01589"></a>01589         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ONI_MAX_SENSORS; ++i)
<a name="l01590"></a>01590         {
<a name="l01591"></a>01591             m_aSensorInfo[i]._setInternal(NULL);
<a name="l01592"></a>01592         }
<a name="l01593"></a>01593     }
<a name="l01594"></a>01594 
<a name="l01595"></a>01595     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> _setHandle(OniDeviceHandle deviceHandle)
<a name="l01596"></a>01596     {
<a name="l01597"></a>01597         <span class="keywordflow">if</span> (m_device == NULL)
<a name="l01598"></a>01598         {
<a name="l01599"></a>01599             m_device = deviceHandle;
<a name="l01600"></a>01600 
<a name="l01601"></a>01601             clearSensors();
<a name="l01602"></a>01602 
<a name="l01603"></a>01603             oniDeviceGetInfo(m_device, &amp;m_deviceInfo);
<a name="l01604"></a>01604             <span class="comment">// Read deviceInfo</span>
<a name="l01605"></a>01605             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01606"></a>01606         }
<a name="l01607"></a>01607 
<a name="l01608"></a>01608         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a0210e71f7ee8690aed5ae1ce961e690b">STATUS_OUT_OF_FLOW</a>;
<a name="l01609"></a>01609     }
<a name="l01610"></a>01610 
<a name="l01611"></a>01611 <span class="keyword">private</span>:
<a name="l01612"></a>01612     PlaybackControl* m_pPlaybackControl;
<a name="l01613"></a>01613 
<a name="l01614"></a>01614     OniDeviceHandle m_device;
<a name="l01615"></a>01615     DeviceInfo m_deviceInfo;
<a name="l01616"></a>01616     SensorInfo m_aSensorInfo[ONI_MAX_SENSORS];
<a name="l01617"></a>01617 
<a name="l01618"></a>01618     <span class="keywordtype">bool</span> m_isOwner;
<a name="l01619"></a>01619 };
<a name="l01620"></a>01620 
<a name="l01634"></a><a class="code" href="classopenni_1_1_playback_control.html">01634</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>
<a name="l01635"></a>01635 {
<a name="l01636"></a>01636 <span class="keyword">public</span>:
<a name="l01637"></a>01637 
<a name="l01643"></a><a class="code" href="classopenni_1_1_playback_control.html#a1ff78b61cdde4b4777b30325d0cda0d9">01643</a>     <a class="code" href="classopenni_1_1_playback_control.html#a1ff78b61cdde4b4777b30325d0cda0d9">~PlaybackControl</a>()
<a name="l01644"></a>01644     {
<a name="l01645"></a>01645         detach();
<a name="l01646"></a>01646     }
<a name="l01647"></a>01647 
<a name="l01668"></a><a class="code" href="classopenni_1_1_playback_control.html#a5dfee4f2341dc847b6a9d9e0b5319a1f">01668</a>     <span class="keywordtype">float</span> <a class="code" href="classopenni_1_1_playback_control.html#a5dfee4f2341dc847b6a9d9e0b5319a1f">getSpeed</a>()<span class="keyword"> const</span>
<a name="l01669"></a>01669 <span class="keyword">    </span>{
<a name="l01670"></a>01670         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01671"></a>01671         {
<a name="l01672"></a>01672             <span class="keywordflow">return</span> 0.0f;
<a name="l01673"></a>01673         }
<a name="l01674"></a>01674         <span class="keywordtype">float</span> speed;
<a name="l01675"></a>01675         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>&lt;<span class="keywordtype">float</span>&gt;(DEVICE_PROPERTY_PLAYBACK_SPEED, &amp;speed);
<a name="l01676"></a>01676         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01677"></a>01677         {
<a name="l01678"></a>01678             <span class="keywordflow">return</span> 1.0f;
<a name="l01679"></a>01679         }
<a name="l01680"></a>01680         <span class="keywordflow">return</span> speed;
<a name="l01681"></a>01681     }
<a name="l01689"></a><a class="code" href="classopenni_1_1_playback_control.html#a3ba6436562df82179e118296f3c897ee">01689</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#a3ba6436562df82179e118296f3c897ee">setSpeed</a>(<span class="keywordtype">float</span> speed)
<a name="l01690"></a>01690     {
<a name="l01691"></a>01691         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01692"></a>01692         {
<a name="l01693"></a>01693             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01694"></a>01694         }
<a name="l01695"></a>01695         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>&lt;<span class="keywordtype">float</span>&gt;(DEVICE_PROPERTY_PLAYBACK_SPEED, speed);
<a name="l01696"></a>01696     }
<a name="l01697"></a>01697 
<a name="l01703"></a><a class="code" href="classopenni_1_1_playback_control.html#a81ea2303199474834e12407b4752fb3a">01703</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_playback_control.html#a81ea2303199474834e12407b4752fb3a">getRepeatEnabled</a>()<span class="keyword"> const</span>
<a name="l01704"></a>01704 <span class="keyword">    </span>{
<a name="l01705"></a>01705         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01706"></a>01706         {
<a name="l01707"></a>01707             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01708"></a>01708         }
<a name="l01709"></a>01709 
<a name="l01710"></a>01710         OniBool repeat;
<a name="l01711"></a>01711         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a6d6e17eb936779cc22e7e1f68a240d88">getProperty</a>&lt;OniBool&gt;(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED, &amp;repeat);
<a name="l01712"></a>01712         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01713"></a>01713         {
<a name="l01714"></a>01714             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01715"></a>01715         }
<a name="l01716"></a>01716 
<a name="l01717"></a>01717         <span class="keywordflow">return</span> repeat == TRUE;
<a name="l01718"></a>01718     }
<a name="l01719"></a>01719 
<a name="l01728"></a><a class="code" href="classopenni_1_1_playback_control.html#ab0c377c5276294889e2562acb8163d30">01728</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#ab0c377c5276294889e2562acb8163d30">setRepeatEnabled</a>(<span class="keywordtype">bool</span> repeat)
<a name="l01729"></a>01729     {
<a name="l01730"></a>01730         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01731"></a>01731         {
<a name="l01732"></a>01732             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01733"></a>01733         }
<a name="l01734"></a>01734 
<a name="l01735"></a>01735         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#aef50fe8316bd537275e84cced6dd7890">setProperty</a>&lt;OniBool&gt;(DEVICE_PROPERTY_PLAYBACK_REPEAT_ENABLED, repeat ? TRUE : FALSE);
<a name="l01736"></a>01736     }
<a name="l01737"></a>01737 
<a name="l01748"></a><a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">01748</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">seek</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream, <span class="keywordtype">int</span> frameIndex)
<a name="l01749"></a>01749     {
<a name="l01750"></a>01750         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>())
<a name="l01751"></a>01751         {
<a name="l01752"></a>01752             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a9908514b009593d2309afb77e01915c4">STATUS_NO_DEVICE</a>;
<a name="l01753"></a>01753         }
<a name="l01754"></a>01754         OniSeek <a class="code" href="classopenni_1_1_playback_control.html#a99d10ea20ad021cfe056ff225d31d840">seek</a>;
<a name="l01755"></a>01755         seek.frameIndex = frameIndex;
<a name="l01756"></a>01756         seek.stream = stream._getHandle();
<a name="l01757"></a>01757         <span class="keywordflow">return</span> m_pDevice-&gt;<a class="code" href="classopenni_1_1_device.html#a67d755db987d9d608001b13558c97de9">invoke</a>(DEVICE_COMMAND_SEEK, seek);
<a name="l01758"></a>01758     }
<a name="l01759"></a>01759 
<a name="l01768"></a><a class="code" href="classopenni_1_1_playback_control.html#a16916573c6a11d1112444222c5f31158">01768</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_playback_control.html#a16916573c6a11d1112444222c5f31158">getNumberOfFrames</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream)<span class="keyword"> const</span>
<a name="l01769"></a>01769 <span class="keyword">    </span>{
<a name="l01770"></a>01770         <span class="keywordtype">int</span> numOfFrames = -1;
<a name="l01771"></a>01771         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = stream.<a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>&lt;<span class="keywordtype">int</span>&gt;(STREAM_PROPERTY_NUMBER_OF_FRAMES, &amp;numOfFrames);
<a name="l01772"></a>01772         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01773"></a>01773         {
<a name="l01774"></a>01774             <span class="keywordflow">return</span> 0;
<a name="l01775"></a>01775         }
<a name="l01776"></a>01776         <span class="keywordflow">return</span> numOfFrames;
<a name="l01777"></a>01777     }
<a name="l01778"></a>01778 
<a name="l01779"></a><a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">01779</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_playback_control.html#a3d96a42d8fe9880326a18fb10e4cd618">isValid</a>()<span class="keyword"> const</span>
<a name="l01780"></a>01780 <span class="keyword">    </span>{
<a name="l01781"></a>01781         <span class="keywordflow">return</span> m_pDevice != NULL;
<a name="l01782"></a>01782     }
<a name="l01783"></a>01783 <span class="keyword">private</span>:
<a name="l01784"></a>01784     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> attach(<a class="code" href="classopenni_1_1_device.html">Device</a>* device)
<a name="l01785"></a>01785     {
<a name="l01786"></a>01786         <span class="keywordflow">if</span> (!device-&gt;<a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>() || !device-&gt;<a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>())
<a name="l01787"></a>01787         {
<a name="l01788"></a>01788             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l01789"></a>01789         }
<a name="l01790"></a>01790 
<a name="l01791"></a>01791         detach();
<a name="l01792"></a>01792         m_pDevice = device;
<a name="l01793"></a>01793 
<a name="l01794"></a>01794         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l01795"></a>01795     }
<a name="l01796"></a>01796     <span class="keywordtype">void</span> detach()
<a name="l01797"></a>01797     {
<a name="l01798"></a>01798         m_pDevice = NULL;
<a name="l01799"></a>01799     }
<a name="l01800"></a>01800 
<a name="l01801"></a><a class="code" href="classopenni_1_1_playback_control.html#a520fa05e0bf58785da428f7a0241eee2">01801</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_device.html">Device</a>;
<a name="l01802"></a>01802     <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>(<a class="code" href="classopenni_1_1_device.html">Device</a>* pDevice) : m_pDevice(NULL)
<a name="l01803"></a>01803     {
<a name="l01804"></a>01804         <span class="keywordflow">if</span> (pDevice != NULL)
<a name="l01805"></a>01805         {
<a name="l01806"></a>01806             attach(pDevice);
<a name="l01807"></a>01807         }
<a name="l01808"></a>01808     }
<a name="l01809"></a>01809 
<a name="l01810"></a>01810     <a class="code" href="classopenni_1_1_playback_control.html#a520fa05e0bf58785da428f7a0241eee2">Device</a>* m_pDevice;
<a name="l01811"></a>01811 };
<a name="l01812"></a>01812 
<a name="l01813"></a><a class="code" href="classopenni_1_1_camera_settings.html">01813</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>
<a name="l01814"></a>01814 {
<a name="l01815"></a>01815 <span class="keyword">public</span>:
<a name="l01816"></a>01816     <span class="comment">// setters</span>
<a name="l01817"></a><a class="code" href="classopenni_1_1_camera_settings.html#a0d5aba4f0ff486640504f789cfd48266">01817</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a0d5aba4f0ff486640504f789cfd48266">setAutoExposureEnabled</a>(<span class="keywordtype">bool</span> enabled)
<a name="l01818"></a>01818     {
<a name="l01819"></a>01819         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_AUTO_EXPOSURE, enabled ? TRUE : FALSE);
<a name="l01820"></a>01820     }
<a name="l01821"></a><a class="code" href="classopenni_1_1_camera_settings.html#a93e2a514c334edbaa07efa680dc8b93a">01821</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a93e2a514c334edbaa07efa680dc8b93a">setAutoWhiteBalanceEnabled</a>(<span class="keywordtype">bool</span> enabled)
<a name="l01822"></a>01822     {
<a name="l01823"></a>01823         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_AUTO_WHITE_BALANCE, enabled ? TRUE : FALSE);
<a name="l01824"></a>01824     }
<a name="l01825"></a>01825 
<a name="l01826"></a><a class="code" href="classopenni_1_1_camera_settings.html#aa0d08435915fcb1f4e61c0eec9ba74f9">01826</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#aa0d08435915fcb1f4e61c0eec9ba74f9">getAutoExposureEnabled</a>()<span class="keyword"> const</span>
<a name="l01827"></a>01827 <span class="keyword">    </span>{
<a name="l01828"></a>01828         OniBool enabled = FALSE;
<a name="l01829"></a>01829 
<a name="l01830"></a>01830         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_AUTO_EXPOSURE, &amp;enabled);
<a name="l01831"></a>01831         <span class="keywordflow">return</span> rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a> &amp;&amp; enabled == TRUE;
<a name="l01832"></a>01832     }
<a name="l01833"></a><a class="code" href="classopenni_1_1_camera_settings.html#a3672348680d77471408fcb3b733f1d5b">01833</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#a3672348680d77471408fcb3b733f1d5b">getAutoWhiteBalanceEnabled</a>()<span class="keyword"> const</span>
<a name="l01834"></a>01834 <span class="keyword">    </span>{
<a name="l01835"></a>01835         OniBool enabled = FALSE;
<a name="l01836"></a>01836 
<a name="l01837"></a>01837         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_AUTO_WHITE_BALANCE, &amp;enabled);
<a name="l01838"></a>01838         <span class="keywordflow">return</span> rc == <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a> &amp;&amp; enabled == TRUE;
<a name="l01839"></a>01839     }
<a name="l01840"></a>01840 
<a name="l01841"></a><a class="code" href="classopenni_1_1_camera_settings.html#a28a8ecfbb8a198ebb4ad51b60e4794f4">01841</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a28a8ecfbb8a198ebb4ad51b60e4794f4">setGain</a>(<span class="keywordtype">int</span> gain)
<a name="l01842"></a>01842     {
<a name="l01843"></a>01843         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_GAIN, gain);
<a name="l01844"></a>01844     }
<a name="l01845"></a><a class="code" href="classopenni_1_1_camera_settings.html#a1de2542079bb08af57439ab1ded165b7">01845</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_camera_settings.html#a1de2542079bb08af57439ab1ded165b7">setExposure</a>(<span class="keywordtype">int</span> exposure)
<a name="l01846"></a>01846     {
<a name="l01847"></a>01847         <span class="keywordflow">return</span> setProperty(STREAM_PROPERTY_EXPOSURE, exposure);
<a name="l01848"></a>01848     }
<a name="l01849"></a><a class="code" href="classopenni_1_1_camera_settings.html#a6180ac6156cfdc81788f2805e207ee05">01849</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_camera_settings.html#a6180ac6156cfdc81788f2805e207ee05">getGain</a>()
<a name="l01850"></a>01850     {
<a name="l01851"></a>01851         <span class="keywordtype">int</span> gain;
<a name="l01852"></a>01852         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_GAIN, &amp;gain);
<a name="l01853"></a>01853         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01854"></a>01854         {
<a name="l01855"></a>01855             <span class="keywordflow">return</span> 100;
<a name="l01856"></a>01856         }
<a name="l01857"></a>01857         <span class="keywordflow">return</span> gain;
<a name="l01858"></a>01858     }
<a name="l01859"></a><a class="code" href="classopenni_1_1_camera_settings.html#a754f04c54eefa97b9c9384dab0040236">01859</a>     <span class="keywordtype">int</span> <a class="code" href="classopenni_1_1_camera_settings.html#a754f04c54eefa97b9c9384dab0040236">getExposure</a>()
<a name="l01860"></a>01860     {
<a name="l01861"></a>01861         <span class="keywordtype">int</span> exposure;
<a name="l01862"></a>01862         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = getProperty(STREAM_PROPERTY_EXPOSURE, &amp;exposure);
<a name="l01863"></a>01863         <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l01864"></a>01864         {
<a name="l01865"></a>01865             <span class="keywordflow">return</span> 0;
<a name="l01866"></a>01866         }
<a name="l01867"></a>01867         <span class="keywordflow">return</span> exposure;
<a name="l01868"></a>01868     }
<a name="l01869"></a>01869 
<a name="l01870"></a><a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">01870</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> m_pStream != NULL;}
<a name="l01871"></a>01871 <span class="keyword">private</span>:
<a name="l01872"></a>01872     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01873"></a>01873     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> getProperty(<span class="keywordtype">int</span> propertyId, T* value)<span class="keyword"> const</span>
<a name="l01874"></a>01874 <span class="keyword">    </span>{
<a name="l01875"></a>01875         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()) <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333adf334ec01f8b7b2d7a8593c488690475">STATUS_NOT_SUPPORTED</a>;
<a name="l01876"></a>01876 
<a name="l01877"></a>01877         <span class="keywordflow">return</span> m_pStream-&gt;<a class="code" href="classopenni_1_1_video_stream.html#adc8197276c332ce2afcf322de68e0e04">getProperty</a>&lt;T&gt;(propertyId, value);
<a name="l01878"></a>01878     }
<a name="l01879"></a>01879     <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l01880"></a>01880     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> setProperty(<span class="keywordtype">int</span> propertyId, <span class="keyword">const</span> T&amp; value)
<a name="l01881"></a>01881     {
<a name="l01882"></a>01882         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_camera_settings.html#afa314aa55a6554a51d3d9a8ef3defff7">isValid</a>()) <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333adf334ec01f8b7b2d7a8593c488690475">STATUS_NOT_SUPPORTED</a>;
<a name="l01883"></a>01883 
<a name="l01884"></a>01884         <span class="keywordflow">return</span> m_pStream-&gt;<a class="code" href="classopenni_1_1_video_stream.html#a72c23221468529cc97c6bde25fccce2c">setProperty</a>&lt;T&gt;(propertyId, value);
<a name="l01885"></a>01885     }
<a name="l01886"></a>01886 
<a name="l01887"></a><a class="code" href="classopenni_1_1_camera_settings.html#a4fd1028f691947151ea08e0db214f01c">01887</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>;
<a name="l01888"></a>01888     <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>* pStream)
<a name="l01889"></a>01889     {
<a name="l01890"></a>01890         m_pStream = pStream;
<a name="l01891"></a>01891     }
<a name="l01892"></a>01892 
<a name="l01893"></a>01893     <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>* m_pStream;
<a name="l01894"></a>01894 };
<a name="l01895"></a>01895 
<a name="l01896"></a>01896 
<a name="l01909"></a><a class="code" href="classopenni_1_1_open_n_i.html">01909</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>
<a name="l01910"></a>01910 {
<a name="l01911"></a>01911 <span class="keyword">public</span>:
<a name="l01912"></a>01912 
<a name="l01928"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">01928</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>
<a name="l01929"></a>01929     {
<a name="l01930"></a>01930     <span class="keyword">public</span>:
<a name="l01931"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a71eda2ded9fd9334bf4ed424b1b27abc">01931</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a71eda2ded9fd9334bf4ed424b1b27abc">DeviceConnectedListener</a>()
<a name="l01932"></a>01932         {
<a name="l01933"></a>01933             m_deviceConnectedCallbacks.deviceConnected = deviceConnectedCallback;
<a name="l01934"></a>01934             m_deviceConnectedCallbacks.deviceDisconnected = NULL;
<a name="l01935"></a>01935             m_deviceConnectedCallbacks.deviceStateChanged = NULL;
<a name="l01936"></a>01936             m_deviceConnectedCallbacksHandle = NULL;
<a name="l01937"></a>01937         }
<a name="l01938"></a>01938         
<a name="l01939"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a3abd73e0ab82e20356cfe18cf751ad93">01939</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a3abd73e0ab82e20356cfe18cf751ad93">~DeviceConnectedListener</a>()
<a name="l01940"></a>01940         {
<a name="l01941"></a>01941         }
<a name="l01942"></a>01942         
<a name="l01954"></a>01954         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#aba6dd6e8cad373476c7715453a7155fd">onDeviceConnected</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*) = 0;
<a name="l01955"></a>01955     <span class="keyword">private</span>:
<a name="l01956"></a>01956         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceConnectedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, <span class="keywordtype">void</span>* pCookie)
<a name="l01957"></a>01957         {
<a name="l01958"></a>01958             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>*)pCookie;
<a name="l01959"></a>01959             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#aba6dd6e8cad373476c7715453a7155fd">onDeviceConnected</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo));
<a name="l01960"></a>01960         }
<a name="l01961"></a>01961 
<a name="l01962"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">01962</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l01963"></a>01963         OniDeviceCallbacks m_deviceConnectedCallbacks;
<a name="l01964"></a>01964         OniCallbackHandle m_deviceConnectedCallbacksHandle;
<a name="l01965"></a>01965 
<a name="l01966"></a>01966     };
<a name="l01983"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">01983</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>
<a name="l01984"></a>01984     {
<a name="l01985"></a>01985     <span class="keyword">public</span>:
<a name="l01986"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#aad1e5260e540209672440d621c9cd6ed">01986</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#aad1e5260e540209672440d621c9cd6ed">DeviceDisconnectedListener</a>()
<a name="l01987"></a>01987         {
<a name="l01988"></a>01988             m_deviceDisconnectedCallbacks.deviceConnected = NULL;
<a name="l01989"></a>01989             m_deviceDisconnectedCallbacks.deviceDisconnected = deviceDisconnectedCallback;
<a name="l01990"></a>01990             m_deviceDisconnectedCallbacks.deviceStateChanged = NULL;
<a name="l01991"></a>01991             m_deviceDisconnectedCallbacksHandle = NULL;
<a name="l01992"></a>01992         }
<a name="l01993"></a>01993         
<a name="l01994"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#abc423dee371c912301f0c71c7320bb8f">01994</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#abc423dee371c912301f0c71c7320bb8f">~DeviceDisconnectedListener</a>()
<a name="l01995"></a>01995         {
<a name="l01996"></a>01996         }
<a name="l01997"></a>01997         
<a name="l02006"></a>02006         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a93cce4849be363185d58867b63400057">onDeviceDisconnected</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*) = 0;
<a name="l02007"></a>02007     <span class="keyword">private</span>:
<a name="l02008"></a>02008         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceDisconnectedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, <span class="keywordtype">void</span>* pCookie)
<a name="l02009"></a>02009         {
<a name="l02010"></a>02010             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>*)pCookie;
<a name="l02011"></a>02011             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a93cce4849be363185d58867b63400057">onDeviceDisconnected</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo));
<a name="l02012"></a>02012         }
<a name="l02013"></a>02013 
<a name="l02014"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">02014</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l02015"></a>02015         OniDeviceCallbacks m_deviceDisconnectedCallbacks;
<a name="l02016"></a>02016         OniCallbackHandle m_deviceDisconnectedCallbacksHandle;
<a name="l02017"></a>02017     };
<a name="l02031"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">02031</a>     <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>
<a name="l02032"></a>02032     {
<a name="l02033"></a>02033     <span class="keyword">public</span>:
<a name="l02034"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a66553a13dce2ffb59dc85d71f5104020">02034</a>         <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a66553a13dce2ffb59dc85d71f5104020">DeviceStateChangedListener</a>()
<a name="l02035"></a>02035         {
<a name="l02036"></a>02036             m_deviceStateChangedCallbacks.deviceConnected = NULL;
<a name="l02037"></a>02037             m_deviceStateChangedCallbacks.deviceDisconnected = NULL;
<a name="l02038"></a>02038             m_deviceStateChangedCallbacks.deviceStateChanged = deviceStateChangedCallback;
<a name="l02039"></a>02039             m_deviceStateChangedCallbacksHandle = NULL;
<a name="l02040"></a>02040         }
<a name="l02041"></a>02041         
<a name="l02042"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#ad388c57133ddb02c34e77af9266e0e13">02042</a>         <span class="keyword">virtual</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#ad388c57133ddb02c34e77af9266e0e13">~DeviceStateChangedListener</a>()
<a name="l02043"></a>02043         {
<a name="l02044"></a>02044         }
<a name="l02045"></a>02045         
<a name="l02052"></a>02052         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a311b3d677811a45e247553ac02d932b7">onDeviceStateChanged</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*, <a class="code" href="namespaceopenni.html#aeec58c3f4271cc66959b44fa27b10534">DeviceState</a>) = 0;
<a name="l02053"></a>02053     <span class="keyword">private</span>:
<a name="l02054"></a>02054         <span class="keyword">static</span> <span class="keywordtype">void</span> ONI_CALLBACK_TYPE deviceStateChangedCallback(<span class="keyword">const</span> OniDeviceInfo* pInfo, OniDeviceState state, <span class="keywordtype">void</span>* pCookie)
<a name="l02055"></a>02055         {
<a name="l02056"></a>02056             <a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener = (<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>*)pCookie;
<a name="l02057"></a>02057             pListener-&gt;<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a311b3d677811a45e247553ac02d932b7">onDeviceStateChanged</a>(static_cast&lt;const DeviceInfo*&gt;(pInfo), <a class="code" href="namespaceopenni.html#aeec58c3f4271cc66959b44fa27b10534">DeviceState</a>(state));
<a name="l02058"></a>02058         }
<a name="l02059"></a>02059 
<a name="l02060"></a><a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html#a1d661a036b1e7e29b65f2b012bc92d00">02060</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>;
<a name="l02061"></a>02061         OniDeviceCallbacks m_deviceStateChangedCallbacks;
<a name="l02062"></a>02062         OniCallbackHandle m_deviceStateChangedCallbacksHandle;
<a name="l02063"></a>02063     };
<a name="l02064"></a>02064 
<a name="l02070"></a><a class="code" href="classopenni_1_1_open_n_i.html#a0f374c05978a3373f1060c288997d8ca">02070</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a0f374c05978a3373f1060c288997d8ca">initialize</a>()
<a name="l02071"></a>02071     {
<a name="l02072"></a>02072         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniInitialize(ONI_API_VERSION); <span class="comment">// provide version of API, to make sure proper struct sizes are used</span>
<a name="l02073"></a>02073     }
<a name="l02074"></a>02074 
<a name="l02079"></a><a class="code" href="classopenni_1_1_open_n_i.html#a1a3fb2a487849cc591373aa3f88a7edc">02079</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#a1a3fb2a487849cc591373aa3f88a7edc">shutdown</a>()
<a name="l02080"></a>02080     {
<a name="l02081"></a>02081         oniShutdown();
<a name="l02082"></a>02082     }
<a name="l02083"></a>02083 
<a name="l02087"></a><a class="code" href="classopenni_1_1_open_n_i.html#aab96e01582123921bdb223d936393d07">02087</a>     <span class="keyword">static</span> <a class="code" href="structopenni_1_1_version.html">Version</a> <a class="code" href="classopenni_1_1_open_n_i.html#aab96e01582123921bdb223d936393d07">getVersion</a>()
<a name="l02088"></a>02088     {
<a name="l02089"></a>02089         OniVersion version = oniGetVersion();
<a name="l02090"></a>02090         <span class="keyword">union</span>
<a name="l02091"></a>02091         {
<a name="l02092"></a>02092             OniVersion* pC;
<a name="l02093"></a>02093             <a class="code" href="structopenni_1_1_version.html">Version</a>* pCpp;
<a name="l02094"></a>02094         } a;
<a name="l02095"></a>02095         a.pC = &amp;version;
<a name="l02096"></a>02096         <span class="keywordflow">return</span> *a.pCpp;
<a name="l02097"></a>02097     }
<a name="l02098"></a>02098 
<a name="l02106"></a><a class="code" href="classopenni_1_1_open_n_i.html#a01fd4df5c93eaf9a9437bbc4c942130a">02106</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classopenni_1_1_open_n_i.html#a01fd4df5c93eaf9a9437bbc4c942130a">getExtendedError</a>()
<a name="l02107"></a>02107     {
<a name="l02108"></a>02108         <span class="keywordflow">return</span> oniGetExtendedError();
<a name="l02109"></a>02109     }
<a name="l02110"></a>02110 
<a name="l02115"></a><a class="code" href="classopenni_1_1_open_n_i.html#aef1804963ffbe476be41f9c2c09ee99e">02115</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#aef1804963ffbe476be41f9c2c09ee99e">enumerateDevices</a>(<a class="code" href="classopenni_1_1_array.html">Array&lt;DeviceInfo&gt;</a>* deviceInfoList)
<a name="l02116"></a>02116     {
<a name="l02117"></a>02117         OniDeviceInfo* m_pDeviceInfos;
<a name="l02118"></a>02118         <span class="keywordtype">int</span> m_deviceInfoCount;
<a name="l02119"></a>02119         oniGetDeviceList(&amp;m_pDeviceInfos, &amp;m_deviceInfoCount);
<a name="l02120"></a>02120         deviceInfoList-&gt;_setData((<a class="code" href="classopenni_1_1_device_info.html">DeviceInfo</a>*)m_pDeviceInfos, m_deviceInfoCount, <span class="keyword">true</span>);
<a name="l02121"></a>02121         oniReleaseDeviceList(m_pDeviceInfos);
<a name="l02122"></a>02122     }
<a name="l02123"></a>02123 
<a name="l02132"></a><a class="code" href="classopenni_1_1_open_n_i.html#ad0e287ef86221db74055c3e928c9adf2">02132</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#ad0e287ef86221db74055c3e928c9adf2">waitForAnyStream</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>** pStreams, <span class="keywordtype">int</span> streamCount, <span class="keywordtype">int</span>* pReadyStreamIndex, <span class="keywordtype">int</span> timeout = <a class="code" href="namespaceopenni.html#a606771f15b60eaf092fa71378787bd66">TIMEOUT_FOREVER</a>)
<a name="l02133"></a>02133     {
<a name="l02134"></a>02134         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> ONI_MAX_STREAMS = 50;
<a name="l02135"></a>02135         OniStreamHandle streams[ONI_MAX_STREAMS];
<a name="l02136"></a>02136 
<a name="l02137"></a>02137         <span class="keywordflow">if</span> (streamCount &gt; ONI_MAX_STREAMS)
<a name="l02138"></a>02138         {
<a name="l02139"></a>02139             printf(<span class="stringliteral">&quot;Too many streams for wait: %d &gt; %d\n&quot;</span>, streamCount, ONI_MAX_STREAMS);
<a name="l02140"></a>02140             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac9368d475a09338730d0c93ffb5cdcb4">STATUS_BAD_PARAMETER</a>;
<a name="l02141"></a>02141         }
<a name="l02142"></a>02142 
<a name="l02143"></a>02143         *pReadyStreamIndex = -1;
<a name="l02144"></a>02144         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; streamCount; ++i)
<a name="l02145"></a>02145         {
<a name="l02146"></a>02146             <span class="keywordflow">if</span> (pStreams[i] != NULL)
<a name="l02147"></a>02147             {
<a name="l02148"></a>02148                 streams[i] = pStreams[i]-&gt;_getHandle();
<a name="l02149"></a>02149             }
<a name="l02150"></a>02150             <span class="keywordflow">else</span>
<a name="l02151"></a>02151             {
<a name="l02152"></a>02152                 streams[i] = NULL;
<a name="l02153"></a>02153             }
<a name="l02154"></a>02154         }
<a name="l02155"></a>02155         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniWaitForAnyStream(streams, streamCount, pReadyStreamIndex, timeout);
<a name="l02156"></a>02156 
<a name="l02157"></a>02157         <span class="keywordflow">return</span> rc;
<a name="l02158"></a>02158     }
<a name="l02159"></a>02159 
<a name="l02167"></a><a class="code" href="classopenni_1_1_open_n_i.html#a134e63dd470532118c4d9d06496fa910">02167</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a134e63dd470532118c4d9d06496fa910">addDeviceConnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener)
<a name="l02168"></a>02168     {
<a name="l02169"></a>02169         <span class="keywordflow">if</span> (pListener-&gt;m_deviceConnectedCallbacksHandle != NULL)
<a name="l02170"></a>02170         {
<a name="l02171"></a>02171             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02172"></a>02172         }
<a name="l02173"></a>02173         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceConnectedCallbacks, pListener, &amp;pListener-&gt;m_deviceConnectedCallbacksHandle);
<a name="l02174"></a>02174     }
<a name="l02182"></a><a class="code" href="classopenni_1_1_open_n_i.html#a92e84cbd6623beb7bc7438ab3e499a15">02182</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#a92e84cbd6623beb7bc7438ab3e499a15">addDeviceDisconnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener)
<a name="l02183"></a>02183     {
<a name="l02184"></a>02184         <span class="keywordflow">if</span> (pListener-&gt;m_deviceDisconnectedCallbacksHandle != NULL)
<a name="l02185"></a>02185         {
<a name="l02186"></a>02186             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02187"></a>02187         }
<a name="l02188"></a>02188         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceDisconnectedCallbacks, pListener, &amp;pListener-&gt;m_deviceDisconnectedCallbacksHandle);
<a name="l02189"></a>02189     }
<a name="l02197"></a><a class="code" href="classopenni_1_1_open_n_i.html#aa810e1ed0639e76d90d6b110283518d3">02197</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_open_n_i.html#aa810e1ed0639e76d90d6b110283518d3">addDeviceStateChangedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener)
<a name="l02198"></a>02198     {
<a name="l02199"></a>02199         <span class="keywordflow">if</span> (pListener-&gt;m_deviceStateChangedCallbacksHandle != NULL)
<a name="l02200"></a>02200         {
<a name="l02201"></a>02201             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02202"></a>02202         }
<a name="l02203"></a>02203         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRegisterDeviceCallbacks(&amp;pListener-&gt;m_deviceStateChangedCallbacks, pListener, &amp;pListener-&gt;m_deviceStateChangedCallbacksHandle);
<a name="l02204"></a>02204     }
<a name="l02212"></a><a class="code" href="classopenni_1_1_open_n_i.html#a350f5989882cbf4b29dbbcae42003f54">02212</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#a350f5989882cbf4b29dbbcae42003f54">removeDeviceConnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_connected_listener.html">DeviceConnectedListener</a>* pListener)
<a name="l02213"></a>02213     {
<a name="l02214"></a>02214         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceConnectedCallbacksHandle);
<a name="l02215"></a>02215         pListener-&gt;m_deviceConnectedCallbacksHandle = NULL;
<a name="l02216"></a>02216     }
<a name="l02224"></a><a class="code" href="classopenni_1_1_open_n_i.html#af68edcf05f1e50f620c13d5fb393f105">02224</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#af68edcf05f1e50f620c13d5fb393f105">removeDeviceDisconnectedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_disconnected_listener.html">DeviceDisconnectedListener</a>* pListener)
<a name="l02225"></a>02225     {
<a name="l02226"></a>02226         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceDisconnectedCallbacksHandle);
<a name="l02227"></a>02227         pListener-&gt;m_deviceDisconnectedCallbacksHandle = NULL;
<a name="l02228"></a>02228     }
<a name="l02236"></a><a class="code" href="classopenni_1_1_open_n_i.html#acab32726b8f7b9a2d7619ce9be3b7da2">02236</a>     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_open_n_i.html#acab32726b8f7b9a2d7619ce9be3b7da2">removeDeviceStateChangedListener</a>(<a class="code" href="classopenni_1_1_open_n_i_1_1_device_state_changed_listener.html">DeviceStateChangedListener</a>* pListener)
<a name="l02237"></a>02237     {
<a name="l02238"></a>02238         oniUnregisterDeviceCallbacks(pListener-&gt;m_deviceStateChangedCallbacksHandle);
<a name="l02239"></a>02239         pListener-&gt;m_deviceStateChangedCallbacksHandle = NULL;
<a name="l02240"></a>02240     }
<a name="l02241"></a>02241 <span class="keyword">private</span>:
<a name="l02242"></a>02242     <a class="code" href="classopenni_1_1_open_n_i.html">OpenNI</a>()
<a name="l02243"></a>02243     {
<a name="l02244"></a>02244     }
<a name="l02245"></a>02245 };
<a name="l02246"></a>02246 
<a name="l02282"></a><a class="code" href="classopenni_1_1_coordinate_converter.html">02282</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_coordinate_converter.html">CoordinateConverter</a>
<a name="l02283"></a>02283 {
<a name="l02284"></a>02284 <span class="keyword">public</span>:
<a name="l02295"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">02295</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">convertWorldToDepth</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> worldX, <span class="keywordtype">float</span> worldY, <span class="keywordtype">float</span> worldZ, <span class="keywordtype">int</span>* pDepthX, <span class="keywordtype">int</span>* pDepthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>* pDepthZ)
<a name="l02296"></a>02296     {
<a name="l02297"></a>02297         <span class="keywordtype">float</span> depthX, depthY, depthZ;
<a name="l02298"></a>02298         <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterWorldToDepth(depthStream._getHandle(), worldX, worldY, worldZ, &amp;depthX, &amp;depthY, &amp;depthZ);
<a name="l02299"></a>02299         *pDepthX = (int)depthX;
<a name="l02300"></a>02300         *pDepthY = (int)depthY;
<a name="l02301"></a>02301         *pDepthZ = (<a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a>)depthZ;
<a name="l02302"></a>02302         <span class="keywordflow">return</span> rc;
<a name="l02303"></a>02303     }
<a name="l02304"></a>02304 
<a name="l02315"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a8a68229388b168a836c3fe709f2ef953">02315</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a38b9a3f31f62ebd8664f4f8a1fd26704">convertWorldToDepth</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> worldX, <span class="keywordtype">float</span> worldY, <span class="keywordtype">float</span> worldZ, <span class="keywordtype">float</span>* pDepthX, <span class="keywordtype">float</span>* pDepthY, <span class="keywordtype">float</span>* pDepthZ)
<a name="l02316"></a>02316     {
<a name="l02317"></a>02317         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterWorldToDepth(depthStream._getHandle(), worldX, worldY, worldZ, pDepthX, pDepthY, pDepthZ);
<a name="l02318"></a>02318     }
<a name="l02319"></a>02319 
<a name="l02330"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">02330</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">convertDepthToWorld</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">int</span> depthX, <span class="keywordtype">int</span> depthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a> depthZ, <span class="keywordtype">float</span>* pWorldX, <span class="keywordtype">float</span>* pWorldY, <span class="keywordtype">float</span>* pWorldZ)
<a name="l02331"></a>02331     {
<a name="l02332"></a>02332         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToWorld(depthStream._getHandle(), float(depthX), float(depthY), float(depthZ), pWorldX, pWorldY, pWorldZ);
<a name="l02333"></a>02333     }
<a name="l02334"></a>02334 
<a name="l02345"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a5d934a92602a069c703c0640cd776aeb">02345</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a3129cdc99f37c8084ddb27849702b1dc">convertDepthToWorld</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keywordtype">float</span> depthX, <span class="keywordtype">float</span> depthY, <span class="keywordtype">float</span> depthZ, <span class="keywordtype">float</span>* pWorldX, <span class="keywordtype">float</span>* pWorldY, <span class="keywordtype">float</span>* pWorldZ)
<a name="l02346"></a>02346     {
<a name="l02347"></a>02347         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToWorld(depthStream._getHandle(), depthX, depthY, depthZ, pWorldX, pWorldY, pWorldZ);
<a name="l02348"></a>02348     }
<a name="l02349"></a>02349 
<a name="l02361"></a><a class="code" href="classopenni_1_1_coordinate_converter.html#a4faabf558f2eb6e27948e50bffa8f581">02361</a>     <span class="keyword">static</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_coordinate_converter.html#a4faabf558f2eb6e27948e50bffa8f581">convertDepthToColor</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; depthStream, <span class="keyword">const</span> <a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; colorStream, <span class="keywordtype">int</span> depthX, <span class="keywordtype">int</span> depthY, <a class="code" href="namespaceopenni.html#ab2403242071ff06fc6fe18c0c6111d0f">DepthPixel</a> depthZ, <span class="keywordtype">int</span>* pColorX, <span class="keywordtype">int</span>* pColorY)
<a name="l02362"></a>02362     {
<a name="l02363"></a>02363         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCoordinateConverterDepthToColor(depthStream._getHandle(), colorStream._getHandle(), depthX, depthY, depthZ, pColorX, pColorY);
<a name="l02364"></a>02364     }
<a name="l02365"></a>02365 };
<a name="l02366"></a>02366 
<a name="l02381"></a><a class="code" href="classopenni_1_1_recorder.html">02381</a> <span class="keyword">class </span><a class="code" href="classopenni_1_1_recorder.html">Recorder</a>
<a name="l02382"></a>02382 {
<a name="l02383"></a>02383 <span class="keyword">public</span>:
<a name="l02388"></a><a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">02388</a>     <a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">Recorder</a>() : m_recorder(NULL)
<a name="l02389"></a>02389     {
<a name="l02390"></a>02390     }
<a name="l02391"></a>02391 
<a name="l02395"></a><a class="code" href="classopenni_1_1_recorder.html#a4452268d371108c3b670d7527efae3d0">02395</a>     <a class="code" href="classopenni_1_1_recorder.html#a4452268d371108c3b670d7527efae3d0">~Recorder</a>()
<a name="l02396"></a>02396     {
<a name="l02397"></a>02397         <a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">destroy</a>();
<a name="l02398"></a>02398     }
<a name="l02399"></a>02399 
<a name="l02411"></a><a class="code" href="classopenni_1_1_recorder.html#a7e0865a077fcc968427977d2063884ec">02411</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#a7e0865a077fcc968427977d2063884ec">create</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* fileName)
<a name="l02412"></a>02412     {
<a name="l02413"></a>02413         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02414"></a>02414         {
<a name="l02415"></a>02415             <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniCreateRecorder(fileName, &amp;m_recorder);
<a name="l02416"></a>02416         }
<a name="l02417"></a>02417         <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02418"></a>02418     }
<a name="l02419"></a>02419 
<a name="l02426"></a><a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">02426</a>     <span class="keywordtype">bool</span> <a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>()<span class="keyword"> const</span>
<a name="l02427"></a>02427 <span class="keyword">    </span>{
<a name="l02428"></a>02428         <span class="keywordflow">return</span> NULL != getHandle();
<a name="l02429"></a>02429     }
<a name="l02430"></a>02430 
<a name="l02441"></a><a class="code" href="classopenni_1_1_recorder.html#ab5351b4642fd738147feca2d7e5e2565">02441</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#ab5351b4642fd738147feca2d7e5e2565">attach</a>(<a class="code" href="classopenni_1_1_video_stream.html">VideoStream</a>&amp; stream, <span class="keywordtype">bool</span> allowLossyCompression = <span class="keyword">false</span>)
<a name="l02442"></a>02442     {
<a name="l02443"></a>02443         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>() || !stream.<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l02444"></a>02444         {
<a name="l02445"></a>02445             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02446"></a>02446         }
<a name="l02447"></a>02447         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRecorderAttachStream(
<a name="l02448"></a>02448                 m_recorder,
<a name="l02449"></a>02449                 stream._getHandle(),
<a name="l02450"></a>02450                 allowLossyCompression);
<a name="l02451"></a>02451     }
<a name="l02452"></a>02452 
<a name="l02459"></a><a class="code" href="classopenni_1_1_recorder.html#af9e22ae7bb59250cf97db34cf067da5a">02459</a>     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_recorder.html#af9e22ae7bb59250cf97db34cf067da5a">start</a>()
<a name="l02460"></a>02460     {
<a name="l02461"></a>02461         <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02462"></a>02462         {
<a name="l02463"></a>02463             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a3b91bb9ad4a7c004eafb21f10de74346">STATUS_ERROR</a>;
<a name="l02464"></a>02464         }
<a name="l02465"></a>02465         <span class="keywordflow">return</span> (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniRecorderStart(m_recorder);
<a name="l02466"></a>02466     }
<a name="l02467"></a>02467 
<a name="l02471"></a><a class="code" href="classopenni_1_1_recorder.html#a5912dcb5b76623a1bfdc53e97fe9dc03">02471</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_recorder.html#a5912dcb5b76623a1bfdc53e97fe9dc03">stop</a>()
<a name="l02472"></a>02472     {
<a name="l02473"></a>02473         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02474"></a>02474         {
<a name="l02475"></a>02475             oniRecorderStop(m_recorder);
<a name="l02476"></a>02476         }
<a name="l02477"></a>02477     }
<a name="l02478"></a>02478 
<a name="l02482"></a><a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">02482</a>     <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_recorder.html#a66e242dbe35907e9ecdbb516532ed347">destroy</a>()
<a name="l02483"></a>02483     {
<a name="l02484"></a>02484         <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_recorder.html#a20d2a025db00aa3f27c4d864c2587d91">isValid</a>())
<a name="l02485"></a>02485         {
<a name="l02486"></a>02486             oniRecorderDestroy(&amp;m_recorder);
<a name="l02487"></a>02487         }
<a name="l02488"></a>02488     }
<a name="l02489"></a>02489 
<a name="l02490"></a>02490 <span class="keyword">private</span>:
<a name="l02491"></a>02491     <a class="code" href="classopenni_1_1_recorder.html#a868e9145d222d3c17c5e0a684f6b247c">Recorder</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp;);
<a name="l02492"></a>02492     <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_recorder.html">Recorder</a>&amp;);
<a name="l02493"></a>02493 
<a name="l02497"></a>02497     OniRecorderHandle getHandle()<span class="keyword"> const</span>
<a name="l02498"></a>02498 <span class="keyword">    </span>{
<a name="l02499"></a>02499         <span class="keywordflow">return</span> m_recorder;
<a name="l02500"></a>02500     }
<a name="l02501"></a>02501 
<a name="l02502"></a>02502 
<a name="l02503"></a>02503     OniRecorderHandle m_recorder;
<a name="l02504"></a>02504 };
<a name="l02505"></a>02505 
<a name="l02506"></a>02506 <span class="comment">// Implemetation</span>
<a name="l02507"></a><a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">02507</a> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_video_stream.html#a171b2f72e383903ee7787697b26017ae">VideoStream::create</a>(<span class="keyword">const</span> <a class="code" href="classopenni_1_1_device.html">Device</a>&amp; device, <a class="code" href="namespaceopenni.html#a50658bbbf9f6e9e57aa6ebdb768fd8c2">SensorType</a> sensorType)
<a name="l02508"></a>02508 {
<a name="l02509"></a>02509     OniStreamHandle streamHandle;
<a name="l02510"></a>02510     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceCreateStream(device._getHandle(), (OniSensorType)sensorType, &amp;streamHandle);
<a name="l02511"></a>02511     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02512"></a>02512     {
<a name="l02513"></a>02513         <span class="keywordflow">return</span> rc;
<a name="l02514"></a>02514     }
<a name="l02515"></a>02515 
<a name="l02516"></a>02516     m_isOwner = <span class="keyword">true</span>;
<a name="l02517"></a>02517     _setHandle(streamHandle);
<a name="l02518"></a>02518 
<a name="l02519"></a>02519     <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_AUTO_WHITE_BALANCE) &amp;&amp; <a class="code" href="classopenni_1_1_video_stream.html#acd1b875ad4fe267deed85f540e33c30d">isPropertySupported</a>(STREAM_PROPERTY_AUTO_EXPOSURE))
<a name="l02520"></a>02520     {
<a name="l02521"></a>02521         m_pCameraSettings = <span class="keyword">new</span> <a class="code" href="classopenni_1_1_camera_settings.html">CameraSettings</a>(<span class="keyword">this</span>);
<a name="l02522"></a>02522     }
<a name="l02523"></a>02523 
<a name="l02524"></a>02524     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02525"></a>02525 }
<a name="l02526"></a>02526 
<a name="l02527"></a><a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">02527</a> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_video_stream.html#ae10d69b147fe098c3dc9cb0bfde415ed">VideoStream::destroy</a>()
<a name="l02528"></a>02528 {
<a name="l02529"></a>02529     <span class="keywordflow">if</span> (!<a class="code" href="classopenni_1_1_video_stream.html#ae187f95f14461215fed421a3d6a66625">isValid</a>())
<a name="l02530"></a>02530     {
<a name="l02531"></a>02531         <span class="keywordflow">return</span>;
<a name="l02532"></a>02532     }
<a name="l02533"></a>02533 
<a name="l02534"></a>02534     <span class="keywordflow">if</span> (m_pCameraSettings != NULL)
<a name="l02535"></a>02535     {
<a name="l02536"></a>02536         <span class="keyword">delete</span> m_pCameraSettings;
<a name="l02537"></a>02537         m_pCameraSettings = NULL;
<a name="l02538"></a>02538     }
<a name="l02539"></a>02539 
<a name="l02540"></a>02540     <span class="keywordflow">if</span> (m_stream != NULL)
<a name="l02541"></a>02541     {
<a name="l02542"></a>02542         <span class="keywordflow">if</span>(m_isOwner)
<a name="l02543"></a>02543             oniStreamDestroy(m_stream);
<a name="l02544"></a>02544         m_stream = NULL;
<a name="l02545"></a>02545     }
<a name="l02546"></a>02546 }
<a name="l02547"></a>02547 
<a name="l02548"></a><a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">02548</a> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> <a class="code" href="classopenni_1_1_device.html#a2240eaf483ea04506f320f3cd963ca62">Device::open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* uri)
<a name="l02549"></a>02549 {
<a name="l02550"></a>02550     <span class="comment">//If we are not the owners, we stick with our own device</span>
<a name="l02551"></a>02551     <span class="keywordflow">if</span>(!m_isOwner)
<a name="l02552"></a>02552     {
<a name="l02553"></a>02553         <span class="keywordflow">if</span>(<a class="code" href="classopenni_1_1_device.html#a17435124df6c3c795fe9ff160fbeff74">isValid</a>()){
<a name="l02554"></a>02554             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02555"></a>02555         }<span class="keywordflow">else</span>{
<a name="l02556"></a>02556             <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333a0210e71f7ee8690aed5ae1ce961e690b">STATUS_OUT_OF_FLOW</a>;
<a name="l02557"></a>02557         }
<a name="l02558"></a>02558     }
<a name="l02559"></a>02559 
<a name="l02560"></a>02560     OniDeviceHandle deviceHandle;
<a name="l02561"></a>02561     <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a> rc = (<a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333">Status</a>)oniDeviceOpen(uri, &amp;deviceHandle);
<a name="l02562"></a>02562     <span class="keywordflow">if</span> (rc != <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>)
<a name="l02563"></a>02563     {
<a name="l02564"></a>02564         <span class="keywordflow">return</span> rc;
<a name="l02565"></a>02565     }
<a name="l02566"></a>02566 
<a name="l02567"></a>02567     _setHandle(deviceHandle);
<a name="l02568"></a>02568 
<a name="l02569"></a>02569     <span class="keywordflow">if</span> (<a class="code" href="classopenni_1_1_device.html#aa79925de3c47e902b28123b846027ecc">isFile</a>())
<a name="l02570"></a>02570     {
<a name="l02571"></a>02571         m_pPlaybackControl = <span class="keyword">new</span> <a class="code" href="classopenni_1_1_playback_control.html">PlaybackControl</a>(<span class="keyword">this</span>);
<a name="l02572"></a>02572     }
<a name="l02573"></a>02573 
<a name="l02574"></a>02574     <span class="keywordflow">return</span> <a class="code" href="namespaceopenni.html#abf03edf56fbb987feebce8e98b3e0333ac4a1d7871ca526614cc705cd34b67367">STATUS_OK</a>;
<a name="l02575"></a>02575 }
<a name="l02576"></a>02576 
<a name="l02577"></a><a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">02577</a> <span class="keywordtype">void</span> <a class="code" href="classopenni_1_1_device.html#a1804e9fe6cd46185f762d01e8d949518">Device::close</a>()
<a name="l02578"></a>02578 {
<a name="l02579"></a>02579     <span class="keywordflow">if</span> (m_pPlaybackControl != NULL)
<a name="l02580"></a>02580     {
<a name="l02581"></a>02581         <span class="keyword">delete</span> m_pPlaybackControl;
<a name="l02582"></a>02582         m_pPlaybackControl = NULL;
<a name="l02583"></a>02583     }
<a name="l02584"></a>02584 
<a name="l02585"></a>02585     <span class="keywordflow">if</span> (m_device != NULL)
<a name="l02586"></a>02586     {
<a name="l02587"></a>02587         <span class="keywordflow">if</span>(m_isOwner)
<a name="l02588"></a>02588         {
<a name="l02589"></a>02589             oniDeviceClose(m_device);
<a name="l02590"></a>02590         }
<a name="l02591"></a>02591 
<a name="l02592"></a>02592         m_device = NULL;
<a name="l02593"></a>02593     }
<a name="l02594"></a>02594 }
<a name="l02595"></a>02595 
<a name="l02596"></a>02596 
<a name="l02597"></a>02597 }
<a name="l02598"></a>02598 
<a name="l02599"></a>02599 <span class="preprocessor">#endif // _OPEN_NI_HPP_</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sun Apr 28 2013 18:21:12 for OpenNI 2.0 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
